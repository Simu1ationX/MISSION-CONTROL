<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MISSION CONTROL — Stark Labs // Mamba Mentality</title>
  <meta name="theme-color" content="#0b1116" />

  <style>
    /* =========================
       STARK LABS // MAMBA HUD
       Single-file dashboard
       ========================= */

    :root{
      --bg0:#050708;
      --bg1:#0b1116;
      --panel:#0e1620cc;
      --panel2:#0b121ac2;
      --text:#d9f4ff;
      --muted:#7fb6c7;
      --line:rgba(116,199,220,.22);
      --line2:rgba(116,199,220,.12);
      --glow:rgba(0,240,255,.30);
      --glow2:rgba(0,240,255,.14);
      --accent:#00f0ff;
      --accent2:#2df4ff;
      --danger:#ff2a2a;
      --warn:#ffb300;
      --ok:#1cffb0;

      --radius:18px;
      --radius2:14px;
      --pad:14px;
      --gap:12px;

      --stroke:1px;
      --shadow: 0 18px 60px rgba(0,0,0,.55);

      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

      --hudScale: 1; /* will be bumped if your screen is huge */
    }

    /* Theme variants */
    [data-theme="purple"]{
      --accent:#a66bff;
      --accent2:#caa2ff;
      --glow:rgba(166,107,255,.32);
      --glow2:rgba(166,107,255,.14);
      --line:rgba(166,107,255,.22);
      --line2:rgba(166,107,255,.12);
    }
    [data-theme="mamba"]{
      --accent:#ff2a2a;
      --accent2:#ff7676;
      --glow:rgba(255,42,42,.26);
      --glow2:rgba(255,42,42,.12);
      --line:rgba(255,42,42,.22);
      --line2:rgba(255,42,42,.12);
    }

    html,body{height:100%; background:radial-gradient(1200px 700px at 50% 20%, rgba(0,240,255,.12), transparent 60%), linear-gradient(180deg, var(--bg0), var(--bg1));}
    body{
      margin:0;
      color:var(--text);
      font-family:var(--font);
      overflow:hidden;
    }

    /* ALWAYS allow clicking UI; never let FX layers steal clicks */
    .fxLayer, .scanlines, .vignette, .bgFx, .hudGlow { pointer-events:none !important; }

    /* Background FX */
    .bgFx{
      position:fixed; inset:0;
      background:
        radial-gradient(900px 500px at 50% 40%, rgba(0,240,255,.10), transparent 70%),
        radial-gradient(600px 360px at 12% 70%, rgba(0,240,255,.08), transparent 65%),
        radial-gradient(700px 380px at 88% 72%, rgba(0,240,255,.07), transparent 65%);
      filter: blur(0px);
      opacity:.9;
      animation: bgPulse 6s ease-in-out infinite;
      z-index:0;
    }
    @keyframes bgPulse{
      0%,100%{transform:translate3d(0,0,0) scale(1);}
      50%{transform:translate3d(0,-6px,0) scale(1.015);}
    }
    .scanlines{
      position:fixed; inset:0;
      background:
        repeating-linear-gradient( to bottom, rgba(255,255,255,.035) 0px, rgba(255,255,255,.035) 1px, rgba(0,0,0,0) 3px, rgba(0,0,0,0) 6px);
      mix-blend-mode: overlay;
      opacity:.10;
      z-index:1;
    }
    .vignette{
      position:fixed; inset:0;
      background: radial-gradient(circle at 50% 45%, transparent 40%, rgba(0,0,0,.55) 78%, rgba(0,0,0,.75));
      z-index:2;
    }

    /* Red flash transition (aggressive) */
    .redFlash{
      position:fixed; inset:0;
      background: radial-gradient(circle at 50% 45%, rgba(255,42,42,.50), rgba(0,0,0,.02) 55%, rgba(0,0,0,.30));
      opacity:0;
      z-index:99998;
      transition: opacity 130ms ease;
      pointer-events:none;
    }
    .redFlash.on{ opacity:1; }

    /* Layout wrapper */
    .wrap{
      position:relative;
      z-index:3;
      height:100%;
      width:100%;
      display:flex;
      align-items:stretch;
      justify-content:center;
      padding: clamp(10px, 1.3vw, 18px);
      box-sizing:border-box;
    }

    /* Dashboard grid (fills TV width wise) */
    .dash{
      width: min(1900px, 100%); /* will still fill the screen, but keep clean on huge TVs */
      height: 100%;
      display:grid;
      grid-template-columns: 1.10fr 1.70fr 1.00fr;
      grid-template-rows: 84px 1fr 140px;
      gap: var(--gap);
      transform: scale(var(--hudScale));
      transform-origin: center;
    }

    /* Panels */
    .panel{
      background: linear-gradient(180deg, rgba(14,22,32,.88), rgba(10,16,24,.72));
      border: var(--stroke) solid var(--line);
      border-radius: var(--radius);
      box-shadow:
        0 0 0 1px rgba(0,0,0,.25) inset,
        0 0 32px var(--glow2),
        var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .panel::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 340px at 20% 10%, rgba(255,255,255,.06), transparent 60%),
        radial-gradient(700px 300px at 80% 0%, rgba(255,255,255,.03), transparent 70%);
      opacity:.7;
      pointer-events:none;
    }
    .panel::after{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(90deg, transparent, rgba(0,240,255,.06), transparent);
      opacity:.35;
      transform: translateX(-60%);
      animation: sweep 4.2s linear infinite;
      pointer-events:none;
    }
    @keyframes sweep{
      0%{transform:translateX(-70%);}
      100%{transform:translateX(70%);}
    }

    .hdr{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 10px 12px;
      border-bottom: 1px solid var(--line2);
      position:relative;
      z-index:2;
    }
    .hdr .left{
      display:flex; gap:10px; align-items:center;
      min-width:0;
    }
    .tag{
      font-family:var(--mono);
      font-size:12px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      color: var(--accent2);
      background: rgba(0,0,0,.28);
      box-shadow: 0 0 18px var(--glow2);
      white-space:nowrap;
    }
    .title{
      font-weight:800;
      letter-spacing:.12em;
      font-size: 12px;
      color: rgba(220,250,255,.85);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .mini{
      font-family:var(--mono);
      font-size:11px;
      color: rgba(160,215,230,.76);
    }

    .body{
      padding: 10px 12px;
      position:relative;
      z-index:2;
      height: calc(100% - 46px);
      box-sizing:border-box;
    }

    /* Top Row */
    .topLeft{ grid-column:1; grid-row:1; }
    .topCenter{ grid-column:2; grid-row:1; }
    .topRight{ grid-column:3; grid-row:1; }

    /* Middle Row */
    .leftCol{ grid-column:1; grid-row:2; }
    .execution{ grid-column:2; grid-row:2; }
    .rightCol{ grid-column:3; grid-row:2; display:grid; grid-template-rows: 1fr 1fr; gap: var(--gap); }

    /* Bottom row */
    .bottomLeft{ grid-column:1; grid-row:3; }
    .bottomCenter{ grid-column:2; grid-row:3; }
    .bottomRight{ grid-column:3; grid-row:3; }

    /* Buttons */
    .btnRow{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .btn{
      cursor:pointer;
      user-select:none;
      font-family:var(--mono);
      font-size:12px;
      padding:6px 10px;
      border-radius: 12px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.30);
      color: rgba(220,250,255,.88);
      box-shadow: 0 0 18px var(--glow2);
      transition: transform .08s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.22); }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btn.on{
      border-color: rgba(255,255,255,.26);
      color: var(--accent2);
      box-shadow: 0 0 24px var(--glow);
    }
    .btnDanger{
      border-color: rgba(255,42,42,.34);
      box-shadow: 0 0 26px rgba(255,42,42,.18);
      color: rgba(255,210,210,.92);
    }

    /* Clock center */
    .clockWrap{
      display:flex; align-items:center; justify-content:center;
      height:100%;
      gap: 10px;
    }
    .clock{
      font-family:var(--mono);
      font-size: 34px;
      letter-spacing:.08em;
      font-weight:900;
      text-shadow: 0 0 26px var(--glow2);
    }
    .sub{
      display:flex; flex-direction:column; gap:2px;
      align-items:center;
      margin-top:2px;
    }
    .date{
      font-family:var(--mono);
      font-size:11px;
      color: rgba(180,230,244,.76);
      letter-spacing:.12em;
      text-transform:uppercase;
    }
    .mantra{
      font-family:var(--mono);
      font-size:12px;
      color: var(--accent2);
      opacity:.9;
      letter-spacing:.12em;
      text-transform:uppercase;
    }

    /* Countdown */
    .countdownBig{
      font-family:var(--mono);
      font-size: 30px;
      font-weight:900;
      letter-spacing:.08em;
      color: var(--accent2);
      text-shadow: 0 0 26px var(--glow2);
    }

    /* Lists */
    ul.clean{
      margin:0; padding-left:16px;
      color: rgba(220,250,255,.88);
      font-size: 12px;
      line-height:1.45;
    }
    ul.clean li{ margin: 4px 0; }

    /* Execution core (circular mask overlay) */
    .core{
      position:absolute;
      inset: 52px 12px 12px 12px;
      border-radius: 14px;
      overflow:hidden;
      background: rgba(0,0,0,.22);
      border: 1px solid var(--line2);
      box-shadow: 0 0 30px var(--glow2);
    }
    .core .ring{
      position:absolute;
      inset: 5%;
      border-radius:999px;
      border: 2px solid rgba(255,255,255,.10);
      box-shadow: 0 0 40px var(--glow);
      pointer-events:none;
    }
    .core .ring::before{
      content:"";
      position:absolute; inset:-12%;
      border-radius:999px;
      border: 2px dashed rgba(255,255,255,.10);
      opacity:.55;
      animation: spin 14s linear infinite;
    }
    .core .ring::after{
      content:"";
      position:absolute; inset: 10%;
      border-radius:999px;
      border: 1px solid rgba(255,255,255,.10);
      opacity:.65;
      animation: spin2 9s linear infinite reverse;
    }
    @keyframes spin{ to{ transform:rotate(360deg); } }
    @keyframes spin2{ to{ transform:rotate(360deg); } }

    .core .mask{
      position:absolute; inset:0;
      /* circular viewing port */
      -webkit-mask: radial-gradient(circle at 50% 50%, #000 0 42%, transparent 43% 100%);
              mask: radial-gradient(circle at 50% 50%, #000 0 42%, transparent 43% 100%);
      pointer-events:none;
    }
    .core .maskGlow{
      position:absolute; inset:0;
      background: radial-gradient(circle at 50% 50%, rgba(0,240,255,.18) 0 40%, transparent 52%);
      opacity:.9;
      pointer-events:none;
    }

    /* Widget frame */
    .widgetFrame{
      width:100%;
      height:100%;
      border:0;
      background: transparent;
      border-radius: 12px;
      position:relative;
      z-index:1;
    }

    .smallWidget{
      width:100%;
      height:100%;
      border:0;
      background: transparent;
      border-radius: 12px;
    }

    /* Motivation image options */
    .motivationWatermark{
      position:absolute; inset:0;
      background-position:center;
      background-size: cover;
      opacity:.10;
      filter: saturate(1.1) contrast(1.05);
      pointer-events:none;
      z-index:0;
    }
    .motivationFull{
      position:fixed; inset:0;
      background-position:center;
      background-size: cover;
      opacity:.14;
      filter: saturate(1.2) contrast(1.1);
      pointer-events:none;
      z-index:2;
      display:none;
    }
    body[data-motivation="full"] .motivationFull{ display:block; }

    /* Footer / bottom small info */
    .kv{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      font-family:var(--mono);
      font-size:12px;
      color: rgba(220,250,255,.88);
    }
    .kv .box{
      border: 1px solid var(--line2);
      border-radius: 12px;
      padding: 10px;
      background: rgba(0,0,0,.22);
    }
    .kv .label{ color: rgba(160,215,230,.76); font-size:11px; letter-spacing:.10em; }
    .kv .val{ margin-top:6px; font-weight:800; color: var(--accent2); }

    /* =========================
       BOOT OVERLAY (unstuck fix)
       ========================= */

    /* checkbox controller (kill-switch) */
    #bootToggle{ display:none; }

    .bootOverlay{
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      background: radial-gradient(circle at 50% 45%, rgba(0,240,255,.14), rgba(0,0,0,.90) 60%, rgba(0,0,0,.96));
      z-index: 99999;
      opacity: 0;
      pointer-events: none;
      transition: opacity .22s ease;
    }
    #bootToggle:checked ~ .bootOverlay{
      opacity: 1;
      pointer-events: auto;
    }

    .bootWindow{
      width: min(920px, 92vw);
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(10,16,24,.82), rgba(7,10,16,.78));
      border: 1px solid rgba(116,199,220,.25);
      box-shadow: 0 0 60px rgba(0,240,255,.10), 0 30px 90px rgba(0,0,0,.65);
      overflow:hidden;
      pointer-events:auto;
    }
    .bootTop{
      padding: 12px 14px;
      display:flex; justify-content:space-between; align-items:center;
      border-bottom:1px solid rgba(116,199,220,.18);
    }
    .bootTop .name{
      font-family:var(--mono);
      font-weight:900;
      letter-spacing:.14em;
      font-size:13px;
      color: rgba(220,250,255,.92);
      text-transform:uppercase;
    }
    .bootTop .status{
      font-family:var(--mono);
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(116,199,220,.25);
      color: var(--accent2);
      background: rgba(0,0,0,.35);
    }
    .bootGrid{
      display:grid;
      grid-template-columns: 1.2fr .9fr;
      gap: 12px;
      padding: 14px;
    }
    .bootLog{
      height: 260px;
      border-radius: 14px;
      background: rgba(0,0,0,.30);
      border: 1px solid rgba(116,199,220,.16);
      padding: 10px;
      font-family:var(--mono);
      font-size:12px;
      color: rgba(220,250,255,.90);
      overflow:auto;
      white-space:pre-wrap;
    }
    .bootSide{
      border-radius: 14px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(116,199,220,.16);
      padding: 10px;
    }
    .bootSide .row{
      display:flex; justify-content:space-between; gap:10px;
      font-family:var(--mono);
      font-size:12px;
      padding: 8px 10px;
      border:1px solid rgba(116,199,220,.14);
      background: rgba(0,0,0,.25);
      border-radius: 12px;
      margin-bottom:8px;
    }
    .bootSide .row span:first-child{ color: rgba(160,215,230,.76); }
    .bootSide .row span:last-child{ color: var(--accent2); font-weight:800; }

    .bootActions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 10px;
    }
    .bootHint{
      margin-top: 10px;
      font-family:var(--mono);
      font-size:11px;
      color: rgba(180,230,244,.72);
      line-height:1.4;
    }

    /* responsive: keep usable on smaller screens */
    @media (max-width: 1100px){
      .dash{
        width: 100%;
        grid-template-columns: 1fr;
        grid-template-rows: auto;
        overflow:auto;
      }
      .topLeft,.topCenter,.topRight,.leftCol,.execution,.rightCol,.bottomLeft,.bottomCenter,.bottomRight{
        grid-column:1; grid-row:auto;
      }
      body{ overflow:auto; }
    }
  </style>
</head>

<body data-theme="stark" data-quotes="on" data-motivation="off">
  <!-- Boot kill-switch controller -->
  <input id="bootToggle" type="checkbox" checked hidden>

  <div class="bgFx"></div>
  <div class="scanlines"></div>
  <div class="vignette"></div>
  <div class="redFlash" id="redFlash"></div>

  <!-- Full screen motivation background (mode: FULL) -->
  <div class="motivationFull" id="motivationFull"></div>

  <div class="wrap">
    <div class="dash" id="dash">

      <!-- TOP LEFT: Mission Control -->
      <section class="panel topLeft">
        <div class="hdr">
          <div class="left">
            <span class="tag" id="statusTag">STANDBY</span>
            <div class="title">MISSION CONTROL</div>
          </div>
          <div class="mini" id="linkOk">LINK: OK</div>
        </div>
        <div class="body">
          <div class="mini" style="margin-bottom:10px;">
            SYMBOL: <span id="symbolRead" style="color:var(--accent2);font-weight:800;">CME_MINI:MNQ1!</span>
          </div>

          <div class="btnRow">
            <div class="btn" id="btnThemeStark">STARK</div>
            <div class="btn" id="btnThemePurple">PURPLE</div>
            <div class="btn btnDanger" id="btnThemeMamba">MAMBA</div>
          </div>

          <div style="height:10px;"></div>

          <div class="btnRow">
            <div class="btn" id="btnQuotes">QUOTES: ON</div>
            <div class="btn" id="btnMotivation">MOTIV: OFF</div>
            <div class="btn" id="btnFullscreen">FULLSCREEN</div>
          </div>

          <div style="height:12px;"></div>

          <div class="mini" style="margin-bottom:6px;">OPTIONS (FINAL FORM)</div>
          <ul class="clean">
            <li>Always-on ambient HUD motion</li>
            <li>Circular execution core</li>
            <li>Red flash combat transition</li>
            <li>Embedded TradingView widgets (clean + stable)</li>
          </ul>
        </div>
      </section>

      <!-- TOP CENTER: Clock -->
      <section class="panel topCenter">
        <div class="hdr">
          <div class="left">
            <span class="tag">SYSTEM CLOCK</span>
            <div class="title">ONLINE</div>
          </div>
          <div class="mini" id="modeRead">MODE: STANDBY</div>
        </div>
        <div class="body" style="display:flex;align-items:center;justify-content:center;">
          <div class="clockWrap">
            <div>
              <div class="clock" id="clock">00:00:00</div>
              <div class="sub">
                <div class="date" id="date">—</div>
                <div class="mantra" id="mantra">DISCIPLINE OVER EMOTION.</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- TOP RIGHT: Countdown -->
      <section class="panel topRight">
        <div class="hdr">
          <div class="left">
            <span class="tag">COUNTDOWN</span>
            <div class="title">07:30 MT</div>
          </div>
          <div class="mini" id="sessionTag">STANDBY</div>
        </div>
        <div class="body" style="display:flex;flex-direction:column;gap:8px;justify-content:center;">
          <div class="mini">OPENS IN</div>
          <div class="countdownBig" id="countdown">00:00:00</div>
          <div class="mini" id="sessionNote">RED @ 07:15 MT · LIVE 07:30–10:30 MT</div>
        </div>
      </section>

      <!-- LEFT COLUMN: Threats / Rules -->
      <section class="panel leftCol">
        <div class="hdr">
          <div class="left">
            <span class="tag">THREAT AS NEAR</span>
            <div class="title">LOCK-IN</div>
          </div>
          <div class="mini" id="disciplineState">DISCIPLINE</div>
        </div>
        <div class="body" style="display:grid;grid-template-rows: 1fr 1fr; gap:12px;">
          <div class="panel" style="border-radius:14px;border-color:var(--line2);box-shadow:none;">
            <div class="hdr">
              <div class="left">
                <span class="tag">A+</span>
                <div class="title">NON-NEGOTIABLES</div>
              </div>
              <div class="mini">NO MERCY</div>
            </div>
            <div class="body">
              <ul class="clean">
                <li>A+ setups only</li>
                <li>No overtrade / no revenge</li>
                <li>Hydrate · breathe · calm focus</li>
                <li>One clean trade &gt; ten average</li>
                <li>When target hits: DONE</li>
              </ul>
            </div>
          </div>

          <div class="panel" style="border-radius:14px;border-color:var(--line2);box-shadow:none;">
            <div class="hdr">
              <div class="left">
                <span class="tag">RULES</span>
                <div class="title">SNIPER v3</div>
              </div>
              <div class="mini">SESSION GATE</div>
            </div>
            <div class="body">
              <ul class="clean">
                <li>Wait confirmations (VWAP bias + 9/21 aligned)</li>
                <li>Pullback + reclaim entries only</li>
                <li>No chase candles</li>
                <li>Session gate only</li>
                <li>Hit target = shut it down</li>
              </ul>
            </div>
          </div>

        </div>
      </section>

      <!-- EXECUTION (BIG) -->
      <section class="panel execution" id="executionPanel">
        <div class="hdr">
          <div class="left">
            <span class="tag">EXECUTION</span>
            <div class="title" id="execTitle">MNQ · 5m</div>
          </div>
          <div class="btnRow">
            <div class="btn on" id="btnExec">ON</div>
          </div>
        </div>

        <div class="body" style="padding:0; position:relative;">
          <!-- Motivation watermark option (mode: WATERMARK / OVERLAY) -->
          <div class="motivationWatermark" id="motivationWatermark"></div>

          <!-- core ring + circular mask vibe -->
          <div class="core">
            <iframe id="tvExec" class="widgetFrame" title="Execution Chart"></iframe>
            <div class="ring"></div>
            <div class="maskGlow"></div>
          </div>
        </div>
      </section>

      <!-- RIGHT COLUMN: Structure & Context -->
      <section class="panel rightCol">
        <section class="panel" style="box-shadow:none;">
          <div class="hdr">
            <div class="left">
              <span class="tag">STRUCTURE</span>
              <div class="title" id="structTitle">MNQ · 1H</div>
            </div>
            <div class="mini">ALIGN</div>
          </div>
          <div class="body" style="padding:8px;">
            <iframe id="tvStruct" class="smallWidget" title="Structure Chart"></iframe>
          </div>
        </section>

        <section class="panel" style="box-shadow:none;">
          <div class="hdr">
            <div class="left">
              <span class="tag">CONTEXT</span>
              <div class="title" id="ctxTitle">MNQ · 4H</div>
            </div>
            <div class="mini">BIAS</div>
          </div>
          <div class="body" style="padding:8px;">
            <iframe id="tvCtx" class="smallWidget" title="Context Chart"></iframe>
          </div>
        </section>
      </section>

      <!-- BOTTOM LEFT -->
      <section class="panel bottomLeft">
        <div class="hdr">
          <div class="left">
            <span class="tag">RISK</span>
            <div class="title">CONTROL</div>
          </div>
          <div class="mini" id="riskState">NO OVERTRADE</div>
        </div>
        <div class="body">
          <div class="kv">
            <div class="box">
              <div class="label">DAILY MAX LOSS</div>
              <div class="val">$ TBD</div>
            </div>
            <div class="box">
              <div class="label">DAILY TARGET</div>
              <div class="val">$ TBD</div>
            </div>
            <div class="box">
              <div class="label">WEEKLY TARGET</div>
              <div class="val">$ TBD</div>
            </div>
            <div class="box">
              <div class="label">POSITION LIMITS</div>
              <div class="val">TBD</div>
            </div>
          </div>
        </div>
      </section>

      <!-- BOTTOM CENTER -->
      <section class="panel bottomCenter">
        <div class="hdr">
          <div class="left">
            <span class="tag">SYSTEM</span>
            <div class="title">STATUS</div>
          </div>
          <div class="mini" id="sysSmall">ONLINE</div>
        </div>
        <div class="body" style="font-family:var(--mono);font-size:12px;color:rgba(220,250,255,.88);line-height:1.5;">
          <div><span style="color:rgba(160,215,230,.76);">MODEL</span>  SNIPER v3 · VWAP · 9/21</div>
          <div><span style="color:rgba(160,215,230,.76);">GATE</span>   07:30–10:30 MT · pre-open red @ 07:15</div>
          <div><span style="color:rgba(160,215,230,.76);">STATUS</span> <span id="statusLine" style="color:var(--accent2);font-weight:900;">STANDBY</span></div>
          <div><span style="color:rgba(160,215,230,.76);">MANTRA</span> <span id="mantraSmall">DISCIPLINE OVER EMOTION.</span></div>
        </div>
      </section>

      <!-- BOTTOM RIGHT -->
      <section class="panel bottomRight">
        <div class="hdr">
          <div class="left">
            <span class="tag">MOTIVATION</span>
            <div class="title">3 MODES</div>
          </div>
          <div class="mini" id="motModeRead">OFF</div>
        </div>
        <div class="body">
          <div class="mini" style="margin-bottom:8px;">ALL 3 OPTIONS</div>
          <ul class="clean">
            <li><b>Watermark</b> behind execution core</li>
            <li><b>Full overlay</b> across entire dashboard</li>
            <li><b>Boot overlay</b> while system arms</li>
          </ul>

          <div style="height:10px;"></div>

          <div class="mini" style="margin-bottom:6px;">SET IMAGE</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <div class="btn" id="btnMotWatermark">WATERMARK</div>
            <div class="btn" id="btnMotFull">FULL</div>
            <div class="btn" id="btnMotBoot">BOOT</div>
          </div>

          <div style="height:10px;"></div>

          <div class="mini">Upload your image to: <span style="color:var(--accent2);font-weight:800;">assets/motivation.jpg</span></div>
        </div>
      </section>

    </div>
  </div>

  <!-- =========================
       BOOT OVERLAY (clickable even if JS dies)
       ========================= -->
  <div class="bootOverlay">
    <div class="bootWindow">
      <div class="bootTop">
        <div>
          <div class="name">MISSION CONTROL X</div>
          <div class="mini">STARK LABS INTERFACE · MAMBA MENTALITY · WALL MODE</div>
        </div>
        <div class="status" id="bootStatusPill">BOOTING</div>
      </div>

      <div class="bootGrid">
        <div class="bootLog" id="bootLog">SYS: initializing █</div>

        <div class="bootSide">
          <div class="row"><span>THEME</span><span id="bootTheme">STARK</span></div>
          <div class="row"><span>MOTIVATION</span><span id="bootMot">OFF</span></div>
          <div class="row"><span>ARM</span><span id="bootArm">FULLSCREEN</span></div>

          <div class="bootActions">
            <!-- These are LABELS so they work even if JS is dead -->
            <label for="bootToggle" class="btn" id="btnSkipBoot">SKIP BOOT</label>
            <label for="bootToggle" class="btn btnDanger" id="btnArmFullscreen">ARM + FULLSCREEN</label>
          </div>

          <div class="bootHint" id="bootHint">
            Fullscreen requires a click. If anything fails, SKIP BOOT always works.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // =========================================================
    // HARD SAFETY: never get stuck on boot overlay (failsafe)
    // =========================================================
    setTimeout(() => {
      const t = document.getElementById('bootToggle');
      if (t && t.checked) t.checked = false;
    }, 6500);

    // =========================================================
    // SETTINGS + STATE
    // =========================================================
    const $ = (id) => document.getElementById(id);

    const STATE = {
      theme: localStorage.getItem('mc_theme') || 'stark',
      quotes: localStorage.getItem('mc_quotes') || 'on',
      motivationMode: localStorage.getItem('mc_mot_mode') || 'off', // off | watermark | full | boot
      symbol: localStorage.getItem('mc_symbol') || 'CME_MINI:MNQ1!',
      tfExec: localStorage.getItem('mc_tf_exec') || '5',
      tfStruct: localStorage.getItem('mc_tf_struct') || '60',
      tfCtx: localStorage.getItem('mc_tf_ctx') || '240',
      mantra: localStorage.getItem('mc_mantra') || 'DISCIPLINE OVER EMOTION.'
    };

    // your image path (put your pic here)
    const MOTIVATION_URL = 'assets/motivation.jpg';

    // Mamba quotes rotation
    const QUOTES = [
      "NOISE OFF. READ STRUCTURE.",
      "DISCIPLINE OVER EMOTION.",
      "DON'T CHASE. LET IT COME.",
      "ONE GOOD TRADE.",
      "WIN IN THE DARK.",
      "DETAILS. FOOTWORK. CONTROL.",
      "WHEN YOU'RE TIRED, EXECUTE CLEAN.",
      "HUNT A+ ONLY."
    ];

    function persist(){
      localStorage.setItem('mc_theme', STATE.theme);
      localStorage.setItem('mc_quotes', STATE.quotes);
      localStorage.setItem('mc_mot_mode', STATE.motivationMode);
      localStorage.setItem('mc_symbol', STATE.symbol);
      localStorage.setItem('mc_tf_exec', STATE.tfExec);
      localStorage.setItem('mc_tf_struct', STATE.tfStruct);
      localStorage.setItem('mc_tf_ctx', STATE.tfCtx);
      localStorage.setItem('mc_mantra', STATE.mantra);
    }

    // =========================================================
    // FULLSCREEN (browser requires gesture)
    // =========================================================
    async function requestFS(){
      const el = document.documentElement;
      try{
        if (!document.fullscreenElement) await el.requestFullscreen();
      }catch(e){
        // ignore (some browsers block)
      }
    }

    // =========================================================
    // THEME + FLASH
    // =========================================================
    function redFlash(){
      const f = $('redFlash');
      if(!f) return;
      f.classList.add('on');
      setTimeout(()=>f.classList.remove('on'), 170);
    }

    function setTheme(t){
      STATE.theme = t;
      document.body.setAttribute('data-theme', t);
      $('bootTheme').textContent = t.toUpperCase();
      persist();
      // button states
      $('btnThemeStark').classList.toggle('on', t==='stark');
      $('btnThemePurple').classList.toggle('on', t==='purple');
      $('btnThemeMamba').classList.toggle('on', t==='mamba');
    }

    // =========================================================
    // MOTIVATION (3 modes)
    // off | watermark | full | boot
    // =========================================================
    function applyMotivation(){
      $('motivationFull').style.backgroundImage = `url("${MOTIVATION_URL}")`;
      $('motivationWatermark').style.backgroundImage = `url("${MOTIVATION_URL}")`;

      // reset
      document.body.setAttribute('data-motivation', 'off');
      $('motivationWatermark').style.opacity = '0';
      $('motModeRead').textContent = 'OFF';
      $('bootMot').textContent = 'OFF';

      if (STATE.motivationMode === 'watermark'){
        $('motivationWatermark').style.opacity = '.12';
        $('motModeRead').textContent = 'WATERMARK';
        $('bootMot').textContent = 'WATERMARK';
      }
      if (STATE.motivationMode === 'full'){
        document.body.setAttribute('data-motivation', 'full');
        $('motivationWatermark').style.opacity = '.10';
        $('motModeRead').textContent = 'FULL';
        $('bootMot').textContent = 'FULL';
      }
      if (STATE.motivationMode === 'boot'){
        $('motivationWatermark').style.opacity = '.10';
        $('motModeRead').textContent = 'BOOT';
        $('bootMot').textContent = 'BOOT';
      }

      persist();
      // button states
      $('btnMotWatermark').classList.toggle('on', STATE.motivationMode==='watermark');
      $('btnMotFull').classList.toggle('on', STATE.motivationMode==='full');
      $('btnMotBoot').classList.toggle('on', STATE.motivationMode==='boot');
    }

    // =========================================================
    // QUOTES
    // =========================================================
    let quoteIdx = 0;
    function setQuotes(on){
      STATE.quotes = on ? 'on' : 'off';
      document.body.setAttribute('data-quotes', STATE.quotes);
      $('btnQuotes').textContent = `QUOTES: ${on ? 'ON' : 'OFF'}`;
      $('btnQuotes').classList.toggle('on', on);
      persist();
    }
    function rotateQuote(){
      if (STATE.quotes !== 'on') return;
      quoteIdx = (quoteIdx + 1) % QUOTES.length;
      const q = QUOTES[quoteIdx];
      $('mantra').textContent = q;
      $('mantraSmall').textContent = q;
      STATE.mantra = q;
      persist();
    }

    // =========================================================
    // TIME / COUNTDOWN (Mountain Time-ish display)
    // Note: browser timezone matters; this keeps it stable for your setup.
    // =========================================================
    function pad(n){ return String(n).padStart(2,'0'); }
    function tickClock(){
      const now = new Date();
      const hh = pad(now.getHours());
      const mm = pad(now.getMinutes());
      const ss = pad(now.getSeconds());
      $('clock').textContent = `${hh}:${mm}:${ss}`;

      const days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
      const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      $('date').textContent = `${days[now.getDay()]}, ${months[now.getMonth()]} ${now.getDate()}, ${now.getFullYear()}`;
    }

    // Countdown to 07:30 (local time). Adjust if needed.
    function tickCountdown(){
      const now = new Date();
      const target = new Date(now);
      target.setHours(7,30,0,0);
      if (target <= now){
        // next day 07:30
        target.setDate(target.getDate()+1);
      }
      const diff = target - now;
      const h = Math.floor(diff / 3600000);
      const m = Math.floor((diff % 3600000) / 60000);
      const s = Math.floor((diff % 60000) / 1000);
      $('countdown').textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;

      // Session tag logic
      const red = new Date(now); red.setHours(7,15,0,0);
      const open = new Date(now); open.setHours(7,30,0,0);
      const end = new Date(now); end.setHours(10,30,0,0);

      let mode = 'STANDBY';
      let st = 'STANDBY';
      if (now >= red && now < open){
        mode = 'LOCK-IN'; st = 'RED WINDOW';
      } else if (now >= open && now < end){
        mode = 'EXECUTE'; st = 'LIVE';
      }
      $('sessionTag').textContent = st;
      $('modeRead').textContent = `MODE: ${mode}`;
      $('statusTag').textContent = mode;
      $('statusLine').textContent = mode;
      $('disciplineState').textContent = mode === 'EXECUTE' ? 'EXECUTE CLEAN' : 'DISCIPLINE';
    }

    // =========================================================
    // TRADINGVIEW EMBEDS (clean + reliable)
    // IMPORTANT:
    // - Embedding full TradingView pages often fails due to X-Frame-Options.
    // - Widgets are the cleanest stable method.
    // =========================================================
    function tvSrcdocAdvancedChart(symbol, interval){
      // Escape </script> inside string ALWAYS with <\/script>
      const cfg = {
        "autosize": true,
        "symbol": symbol,
        "interval": interval,
        "timezone": "Etc/UTC",
        "theme": "dark",
        "style": "1",
        "locale": "en",
        "hide_side_toolbar": false,
        "allow_symbol_change": true,
        "calendar": false,
        "support_host": "https://www.tradingview.com"
      };

      return `
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    html,body{height:100%;margin:0;background:transparent;}
    .wrap{position:fixed;inset:0;}
    /* remove white flashes */
    body{background:#0b1116;}
  </style>
</head>
<body>
  <div class="wrap" id="tv"></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
${JSON.stringify(cfg)}
  <\/script>
</body>
</html>`;
    }

    function loadCharts(){
      $('symbolRead').textContent = STATE.symbol;
      $('execTitle').textContent = `${STATE.symbol} · ${STATE.tfExec}m`;
      $('structTitle').textContent = `${STATE.symbol} · 1H`;
      $('ctxTitle').textContent = `${STATE.symbol} · 4H`;

      $('tvExec').srcdoc = tvSrcdocAdvancedChart(STATE.symbol, STATE.tfExec);
      $('tvStruct').srcdoc = tvSrcdocAdvancedChart(STATE.symbol, STATE.tfStruct);
      $('tvCtx').srcdoc = tvSrcdocAdvancedChart(STATE.symbol, STATE.tfCtx);
    }

    // =========================================================
    // BOOT ANIMATION (never blocks controls)
    // =========================================================
    function bootSequence(){
      const log = $('bootLog');
      const pill = $('bootStatusPill');

      const lines = [
        "SYS: initializing █",
        "SYS: neural interface link ... OK",
        "NET: heartbeat ... OK",
        "DATA: market feed sync ... OK",
        "HUD: stark layers ... online",
        "CORE: execution ring ... armed",
        "RULES: sniper v3 ... loaded",
        "MODE: wall display ... ready",
        "STATUS: STANDBY"
      ];

      let i = 0;
      pill.textContent = "BOOTING";

      const timer = setInterval(()=>{
        try{
          if (!log) return;
          i++;
          log.textContent = lines.slice(0, Math.min(i, lines.length)).join("\n");
          log.scrollTop = log.scrollHeight;
          if (i >= lines.length){
            clearInterval(timer);
            pill.textContent = "READY";
            // if motivation is BOOT, keep it only on boot; otherwise normal
            // auto close boot overlay after short delay
            setTimeout(()=>{ const t=$('bootToggle'); if(t) t.checked=false; }, 700);
          }
        }catch(e){
          clearInterval(timer);
          // failsafe close
          const t=$('bootToggle'); if(t) t.checked=false;
        }
      }, 220);
    }

    // =========================================================
    // SCALE (if it looks small on TV, bump it automatically)
    // =========================================================
    function autoScale(){
      // Try to keep panels "big" on large screens
      const w = window.innerWidth;
      const h = window.innerHeight;
      let s = 1;
      if (w >= 2300) s = 1.08;
      if (w >= 2600) s = 1.12;
      if (w >= 3000) s = 1.18;
      // if short height, don’t over-scale
      if (h <= 900) s = Math.min(s, 1.04);
      document.documentElement.style.setProperty('--hudScale', String(s));
    }

    // =========================================================
    // INIT + EVENTS
    // =========================================================
    function init(){
      autoScale();

      setTheme(STATE.theme);
      setQuotes(STATE.quotes === 'on');
      applyMotivation();
      loadCharts();

      $('mantra').textContent = STATE.mantra;
      $('mantraSmall').textContent = STATE.mantra;

      // buttons
      $('btnThemeStark').onclick = () => { redFlash(); setTheme('stark'); };
      $('btnThemePurple').onclick = () => { redFlash(); setTheme('purple'); };
      $('btnThemeMamba').onclick = () => { redFlash(); setTheme('mamba'); };

      $('btnQuotes').onclick = () => { setQuotes(!(STATE.quotes === 'on')); };
      $('btnMotivation').onclick = () => {
        // quick toggle motivation on/off (keeps last mode if on)
        if (STATE.motivationMode === 'off') STATE.motivationMode = 'watermark';
        else STATE.motivationMode = 'off';
        applyMotivation();
        $('btnMotivation').textContent = `MOTIV: ${STATE.motivationMode === 'off' ? 'OFF' : 'ON'}`;
        $('btnMotivation').classList.toggle('on', STATE.motivationMode !== 'off');
      };

      $('btnMotWatermark').onclick = () => { STATE.motivationMode = 'watermark'; applyMotivation(); };
      $('btnMotFull').onclick = () => { STATE.motivationMode = 'full'; applyMotivation(); };
      $('btnMotBoot').onclick = () => { STATE.motivationMode = 'boot'; applyMotivation(); };

      $('btnFullscreen').onclick = async () => { await requestFS(); };

      // ARM + FULLSCREEN label still closes boot via checkbox. Add fullscreen request on click too.
      $('btnArmFullscreen').addEventListener('click', async () => {
        redFlash();
        await requestFS();
      });

      // also allow clicking anywhere once to request fullscreen (TV kiosk vibes)
      document.addEventListener('click', async () => {
        // only attempt once per load
        document.removeEventListener('click', arguments.callee);
        // If user wants, it will go fullscreen on first click anywhere
        // requestFS();
      }, { once:true });

      // update UI reads
      $('btnMotivation').textContent = `MOTIV: ${STATE.motivationMode === 'off' ? 'OFF' : 'ON'}`;
      $('btnMotivation').classList.toggle('on', STATE.motivationMode !== 'off');

      // time loops
      tickClock(); tickCountdown();
      setInterval(tickClock, 250);
      setInterval(tickCountdown, 250);

      // quote rotation
      setInterval(rotateQuote, 9000);

      // boot
      bootSequence();
    }

    // If anything throws, still ensure boot overlay can be skipped via checkbox label
    try{
      window.addEventListener('load', init);
      window.addEventListener('resize', autoScale);
    }catch(e){
      const t = $('bootToggle'); if(t) t.checked = false;
    }
  </script>
</body>
</html>
