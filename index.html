<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MISSION CONTROL X — STARK / MAMBA</title>

  <!-- FONT -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#05070a;
      --glass: rgba(14,18,26,.55);
      --glass2: rgba(10,14,20,.42);
      --line: rgba(255,255,255,.07);
      --line2: rgba(255,255,255,.04);
      --text:#eaf2ff;
      --muted:#9bb0c8;

      /* STARK CYAN */
      --accent:#00e6ff;
      --accent2:#00a6ff;
      --glow: rgba(0,230,255,.55);

      /* MAMBA RED */
      --red:#ff2b2b;
      --red2:#ff0000;
      --redglow: rgba(255,43,43,.65);

      /* PURPLE OPTION */
      --purple:#8a35ff;
      --purple2:#4f1bff;
      --purpleGlow: rgba(138,53,255,.55);

      --radius:16px;
      --radius2:14px;
      --stroke: 1px;

      --shadow: 0 0 18px rgba(0,230,255,.10), 0 0 40px rgba(0,230,255,.06);
      --shadowHard: 0 0 22px rgba(0,230,255,.18), 0 0 55px rgba(0,230,255,.08);
      --shadowRed: 0 0 26px rgba(255,43,43,.22), 0 0 70px rgba(255,43,43,.10);
    }

    *{box-sizing:border-box}
    html,body{height:100%; width:100%}
    body{
      margin:0;
      background: radial-gradient(1400px 900px at 50% 30%, rgba(0,230,255,.08), transparent 58%),
                  radial-gradient(900px 650px at 20% 85%, rgba(0,230,255,.06), transparent 62%),
                  radial-gradient(900px 650px at 85% 80%, rgba(0,230,255,.05), transparent 62%),
                  var(--bg);
      color:var(--text);
      font-family:"Orbitron", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow:hidden;
      user-select:none;
    }

    /* ===== Mode system ===== */
    body.mode-stark{
      --accent:#00e6ff;
      --accent2:#00a6ff;
      --glow: rgba(0,230,255,.55);
      --shadow: 0 0 18px rgba(0,230,255,.10), 0 0 40px rgba(0,230,255,.06);
      --shadowHard: 0 0 22px rgba(0,230,255,.18), 0 0 55px rgba(0,230,255,.08);
      background: radial-gradient(1400px 900px at 50% 30%, rgba(0,230,255,.08), transparent 58%),
                  radial-gradient(900px 650px at 20% 85%, rgba(0,230,255,.06), transparent 62%),
                  radial-gradient(900px 650px at 85% 80%, rgba(0,230,255,.05), transparent 62%),
                  var(--bg);
    }
    body.mode-purple{
      --accent: var(--purple);
      --accent2: var(--purple2);
      --glow: var(--purpleGlow);
      --shadow: 0 0 18px rgba(138,53,255,.10), 0 0 40px rgba(138,53,255,.06);
      --shadowHard: 0 0 22px rgba(138,53,255,.18), 0 0 55px rgba(138,53,255,.08);
      background: radial-gradient(1400px 900px at 50% 30%, rgba(138,53,255,.09), transparent 58%),
                  radial-gradient(900px 650px at 20% 85%, rgba(138,53,255,.06), transparent 62%),
                  radial-gradient(900px 650px at 85% 80%, rgba(138,53,255,.05), transparent 62%),
                  #04030a;
    }
    body.mode-mamba{
      --accent: var(--red);
      --accent2: var(--red2);
      --glow: var(--redglow);
      --shadow: var(--shadowRed);
      --shadowHard: 0 0 30px rgba(255,43,43,.22), 0 0 85px rgba(255,43,43,.10);
      background: radial-gradient(1400px 900px at 50% 30%, rgba(255,43,43,.12), transparent 58%),
                  radial-gradient(900px 650px at 20% 85%, rgba(255,43,43,.08), transparent 62%),
                  radial-gradient(900px 650px at 85% 80%, rgba(255,43,43,.06), transparent 62%),
                  #000;
    }

    /* ===== Ambient layers: grid + scanlines + noise ===== */
    .ambient{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
    }

    .grid{
      position:absolute; inset:-2px;
      background:
        linear-gradient(to right, rgba(255,255,255,.04) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.035) 1px, transparent 1px);
      background-size: 60px 60px;
      opacity:.12;
      filter: drop-shadow(0 0 10px rgba(0,0,0,.6));
      transform: perspective(1000px) rotateX(18deg) translateY(-60px) scale(1.15);
      transform-origin: 50% 0%;
      animation: gridDrift 14s linear infinite;
    }
    @keyframes gridDrift{
      0%{ background-position: 0 0, 0 0; }
      100%{ background-position: 240px 0, 0 240px; }
    }

    .scanlines{
      position:absolute; inset:0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,0) 0px,
        rgba(0,0,0,0) 3px,
        rgba(0,0,0,.20) 4px
      );
      opacity:.12;
      mix-blend-mode: overlay;
      animation: scanMove 5.5s linear infinite;
    }
    @keyframes scanMove{
      0%{ transform: translateY(0); }
      100%{ transform: translateY(28px); }
    }

    .noise{
      position:absolute; inset:0;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
      opacity:.08;
      mix-blend-mode: overlay;
      animation: noiseF 1.4s steps(2) infinite;
    }
    @keyframes noiseF{
      0%{ transform: translate(0,0); }
      20%{ transform: translate(-8px,6px); }
      40%{ transform: translate(10px,-6px); }
      60%{ transform: translate(-6px,-10px); }
      80%{ transform: translate(8px,10px); }
      100%{ transform: translate(0,0); }
    }

    /* ===== Fullscreen / shell ===== */
    .shell{
      position:relative;
      z-index:1;
      width:100vw;
      height:100vh;
      padding: 14px;
    }

    /* ===== HUD layout (TV-first) ===== */
    .hud{
      width:100%;
      height:100%;
      display:grid;
      grid-template-columns: 24% 52% 24%;
      grid-template-rows: 18% 56% 26%;
      gap: 12px;
    }

    .panel{
      position:relative;
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(12,16,22,.62), rgba(8,10,14,.40));
      border: var(--stroke) solid var(--line);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .panel::before{
      content:"";
      position:absolute; inset:-2px;
      border-radius: inherit;
      border: 1px solid rgba(255,255,255,.05);
      pointer-events:none;
    }
    .panel::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(700px 160px at 15% 12%, rgba(255,255,255,.05), transparent 65%),
        radial-gradient(900px 220px at 85% 18%, rgba(255,255,255,.04), transparent 70%);
      pointer-events:none;
      opacity:.8;
    }

    .panel .bar{
      position:absolute;
      inset:0;
      border-radius: inherit;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
      pointer-events:none;
    }

    .titleRow{
      display:flex;
      gap:10px;
      align-items:center;
      padding: 10px 12px;
      border-bottom: 1px solid var(--line2);
      background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.06));
    }
    .tag{
      font-size: 10px;
      letter-spacing: 2.2px;
      text-transform: uppercase;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.82);
      background: rgba(0,0,0,.18);
    }
    .tag.accent{
      border-color: rgba(255,255,255,.14);
      color: var(--accent);
      box-shadow: 0 0 16px rgba(255,255,255,.06), 0 0 18px var(--glow);
    }

    .small{
      font-size:11px;
      letter-spacing:2px;
      color: rgba(255,255,255,.70);
      text-transform:uppercase;
    }
    .big{
      font-size: 18px;
      letter-spacing: 2px;
      font-weight: 800;
    }
    .muted{ color: var(--muted); }

    .btnRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      padding: 10px 12px 12px;
    }
    .btn{
      cursor:pointer;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.86);
      font-family: inherit;
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.22);
      box-shadow: 0 0 18px rgba(255,255,255,.04), 0 0 22px var(--glow);
    }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btn.red:hover{ box-shadow: 0 0 24px rgba(255,43,43,.10), 0 0 30px var(--redglow); }
    .btn.full{ width:100%; justify-content:center; }

    /* ===== Positions in grid ===== */
    #leftTop{ grid-column: 1; grid-row: 1; }
    #centerTop{ grid-column: 2; grid-row: 1; }
    #rightTop{ grid-column: 3; grid-row: 1; }

    #leftMid{ grid-column: 1; grid-row: 2; }
    #centerMid{ grid-column: 2; grid-row: 2; }
    #rightMid{ grid-column: 3; grid-row: 2; }

    #bottom{ grid-column: 1 / 4; grid-row: 3; display:grid; grid-template-columns: 1.15fr 1.4fr 1.25fr 1.2fr; gap: 12px; background: none; border: none; box-shadow:none; }

    /* ===== Center Core HUD (Stark ring) ===== */
    .coreWrap{
      position:absolute;
      inset: 0;
      pointer-events:none;
      opacity:.95;
      mix-blend-mode: screen;
    }

    .core{
      position:absolute;
      left: 50%;
      top: 50%;
      width: min(64vh, 64vw);
      height: min(64vh, 64vw);
      transform: translate(-50%,-50%);
      filter: drop-shadow(0 0 20px rgba(255,255,255,.08)) drop-shadow(0 0 35px var(--glow));
      opacity:.85;
    }
    .ring{
      position:absolute;
      inset: 0;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
    }
    .ring.r1{ border-color: rgba(255,255,255,.12); animation: spin 26s linear infinite; }
    .ring.r2{ inset: 7%; border-color: rgba(255,255,255,.09); animation: spinR 18s linear infinite; }
    .ring.r3{ inset: 15%; border-color: rgba(255,255,255,.07); animation: spin 12s linear infinite; }
    .ring.r4{ inset: 23%; border-color: rgba(255,255,255,.06); animation: spinR 9s linear infinite; }
    .ringGlow{
      position:absolute; inset: 10%;
      border-radius:50%;
      background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.06), transparent 62%);
      animation: breathe 4.2s ease-in-out infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }
    @keyframes spinR{ to{ transform: rotate(-360deg); } }
    @keyframes breathe{ 0%,100%{ opacity:.55 } 50%{ opacity:1 } }

    .ticks{
      position:absolute;
      inset: -2%;
      border-radius: 50%;
      background:
        conic-gradient(from 0deg,
          rgba(255,255,255,.0) 0deg,
          rgba(255,255,255,.14) 2deg,
          rgba(255,255,255,.0) 4deg,
          rgba(255,255,255,.0) 8deg);
      -webkit-mask: radial-gradient(circle, transparent 63%, #000 64%);
      mask: radial-gradient(circle, transparent 63%, #000 64%);
      opacity:.55;
      animation: spin 22s linear infinite;
    }

    /* ===== Center Top clock / status ===== */
    .clockBox{
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      height:100%;
      padding: 10px 12px;
    }
    .time{
      font-size: 44px;
      font-weight: 800;
      letter-spacing: 3px;
      text-shadow: 0 0 25px rgba(255,255,255,.08);
    }
    .date{
      margin-top: 8px;
      font-size: 12px;
      letter-spacing: 2.2px;
      color: rgba(255,255,255,.72);
      text-transform: uppercase;
    }
    .quote{
      margin-top: 10px;
      font-size: 12px;
      letter-spacing: 2.2px;
      color: var(--accent);
      text-transform: uppercase;
      text-shadow: 0 0 20px rgba(255,255,255,.08);
    }

    /* ===== Countdown ===== */
    .countWrap{ padding: 10px 12px 12px; }
    .countDigits{
      font-size: 34px;
      font-weight: 800;
      letter-spacing: 3px;
      color: var(--accent);
      text-shadow: 0 0 25px var(--glow);
      text-align:right;
    }
    .countSmall{
      margin-top: 8px;
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: rgba(255,255,255,.66);
      display:flex;
      justify-content:space-between;
      gap:10px;
    }
    .pulse{
      animation: pulse 1s infinite;
    }
    @keyframes pulse{
      0%{opacity:1}
      50%{opacity:.55}
      100%{opacity:1}
    }

    /* ===== Iframe charts ===== */
    .frameWrap{
      position:relative;
      width:100%;
      height:100%;
    }
    iframe.chart{
      width:100%;
      height:100%;
      border:0;
      border-radius: var(--radius);
      background: rgba(0,0,0,.35);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
    }

    /* ===== Bottom multi-panels ===== */
    .bpanel{
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(12,16,22,.62), rgba(8,10,14,.40));
      border: var(--stroke) solid var(--line);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
      position:relative;
    }
    .bpanel .content{ padding: 10px 12px 12px; }
    ul.clean{
      margin: 8px 0 0;
      padding: 0 0 0 16px;
      font-size: 12px;
      letter-spacing: 1.2px;
      color: rgba(255,255,255,.82);
      line-height: 1.5;
    }
    ul.clean li{ margin: 6px 0; }

    .statGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 8px;
    }
    .stat{
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.07);
      background: rgba(0,0,0,.18);
      padding: 10px;
    }
    .k{ font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: rgba(255,255,255,.60); }
    .v{ margin-top: 8px; font-size: 14px; letter-spacing: 1.4px; color: rgba(255,255,255,.88); }
    .v b{ color: var(--accent); }

    /* ===== Motivation system (3 modes) ===== */
    .motivation{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity .25s ease;
    }
    .motivation.on{ opacity: 1; }
    /* Mode 1: watermark */
    .motivation.watermark{
      opacity:.14;
      mix-blend-mode: screen;
      filter: grayscale(.2) contrast(1.05) saturate(1.2);
      background-size: cover;
      background-position: center;
    }
    /* Mode 2: corner badge */
    .motivationBadge{
      position:absolute;
      right: 14px;
      bottom: 14px;
      width: 128px;
      height: 128px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background-size: cover;
      background-position:center;
      filter: contrast(1.08) saturate(1.2);
      box-shadow: 0 0 25px rgba(255,255,255,.08), 0 0 35px var(--glow);
      opacity:0;
      transition: opacity .25s ease;
      pointer-events:none;
      z-index:5;
    }
    .motivationBadge.on{ opacity: .88; }

    /* Mode 3: full overlay (during boot / mamba) */
    .motivationOverlay{
      position:fixed;
      inset:0;
      background-size: cover;
      background-position:center;
      opacity: 0;
      pointer-events:none;
      transition: opacity .35s ease;
      z-index: 50;
      filter: contrast(1.1) saturate(1.2);
    }
    .motivationOverlay.on{
      opacity: .30;
    }

    /* ===== BOOT overlay ===== */
    .boot{
      position:fixed; inset:0;
      z-index:100;
      background: radial-gradient(1200px 900px at 50% 35%, rgba(0,230,255,.10), transparent 58%),
                  linear-gradient(180deg, rgba(0,0,0,.88), rgba(0,0,0,.96));
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }
    .bootCard{
      width: min(980px, 92vw);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(10,12,16,.65);
      box-shadow: 0 0 30px rgba(255,255,255,.06), 0 0 60px rgba(0,230,255,.08);
      overflow:hidden;
    }
    .bootTop{
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .bootTitle{
      font-weight:800;
      letter-spacing: 3px;
      text-transform: uppercase;
    }
    .bootSub{
      font-size: 11px;
      letter-spacing: 2px;
      color: rgba(255,255,255,.70);
      text-transform: uppercase;
    }
    .bootBody{
      padding: 16px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
      align-items: start;
    }
    .terminal{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.35);
      padding: 12px 12px 14px;
      height: 260px;
      overflow:hidden;
      position:relative;
    }
    .termLine{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 12px;
      letter-spacing: .2px;
      color: rgba(240,250,255,.82);
      line-height: 1.45;
      white-space: pre;
    }
    .caret{
      display:inline-block;
      width: 10px;
      height: 14px;
      background: var(--accent);
      margin-left: 6px;
      animation: blink .9s step-start infinite;
      box-shadow: 0 0 18px var(--glow);
    }
    @keyframes blink{ 50%{ opacity:0 } }

    .bootActions{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.25);
      padding: 12px;
    }
    .bootActions .btn{ width:100%; margin-top: 10px; }

    /* ===== MAMBA RED FLASH TRANSITION ===== */
    .flash{
      position:fixed; inset:0;
      z-index:90;
      pointer-events:none;
      opacity:0;
      background:
        radial-gradient(900px 520px at 50% 40%, rgba(255,43,43,.45), transparent 60%),
        linear-gradient(180deg, rgba(255,0,0,.30), rgba(0,0,0,.0));
      mix-blend-mode: screen;
    }
    .flash.go{
      animation: flashBang .55s ease-out forwards;
    }
    @keyframes flashBang{
      0%{ opacity: 0 }
      10%{ opacity: 1 }
      35%{ opacity: .65 }
      100%{ opacity: 0 }
    }

    /* ===== Responsive fallback ===== */
    @media (max-width: 1200px){
      .hud{
        grid-template-columns: 1fr;
        grid-template-rows: auto;
      }
      #bottom{ grid-template-columns: 1fr; }
      body{ overflow:auto; }
    }
  </style>
</head>

<body class="mode-stark">
  <!-- Motivation overlay (Mode 3) -->
  <div class="motivationOverlay" id="motivationOverlay"></div>

  <!-- Red flash -->
  <div class="flash" id="flash"></div>

  <!-- Ambient HUD layers -->
  <div class="ambient">
    <div class="grid"></div>
    <div class="scanlines"></div>
    <div class="noise"></div>
  </div>

  <!-- BOOT SCREEN -->
  <div class="boot" id="boot">
    <div class="bootCard">
      <div class="bootTop">
        <div>
          <div class="bootTitle">MISSION CONTROL X</div>
          <div class="bootSub">STARK LABS INTERFACE • MAMBA MENTALITY • TV MODE</div>
        </div>
        <div class="tag accent" id="bootStatus">STANDBY</div>
      </div>

      <div class="bootBody">
        <div class="terminal">
          <div class="termLine" id="term"></div>
          <div class="termLine"><span style="color:var(--accent)">SYS&gt;</span> <span id="termCmd">initializing</span><span class="caret"></span></div>
        </div>

        <div class="bootActions">
          <div class="small">SYSTEM OPTIONS</div>
          <button class="btn" id="bootTheme">THEME: STARK (CYAN)</button>
          <button class="btn" id="bootMotivation">MOTIVATION: OFF</button>
          <button class="btn red" id="bootArm">ARM + FULLSCREEN</button>
          <button class="btn" id="bootSkip">SKIP BOOT</button>
          <div style="margin-top:10px" class="bootSub">
            Fullscreen requires a click. After arming, it stays locked-in.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN SHELL -->
  <div class="shell">
    <div class="hud">

      <!-- LEFT TOP -->
      <div class="panel" id="leftTop">
        <div class="titleRow">
          <span class="tag accent">NEON ELITE</span>
          <span class="tag">WAR ROOM</span>
          <span class="tag" id="modeTag">STARK</span>
        </div>
        <div style="padding:10px 12px 0;">
          <div class="big">MISSION CONTROL</div>
          <div class="small muted" style="margin-top:6px;">SYMBOL • <span id="symLabel"></span></div>
        </div>
        <div class="btnRow">
          <button class="btn red" id="mambaBtn">MAMBA MODE</button>
          <button class="btn" id="themeBtn">PURPLE</button>
          <button class="btn" id="quotesBtn">QUOTES: ON</button>
          <button class="btn" id="motBtn">MOTIVATION: OFF</button>
          <button class="btn" id="fullBtn">FULLSCREEN</button>
        </div>
      </div>

      <!-- CENTER TOP -->
      <div class="panel" id="centerTop">
        <div class="clockBox">
          <div class="time" id="nowTime">--:--:--</div>
          <div class="date" id="nowDate">---</div>
          <div class="quote" id="quoteLine">THE JOB'S NOT FINISHED.</div>
        </div>
      </div>

      <!-- RIGHT TOP -->
      <div class="panel" id="rightTop">
        <div class="titleRow">
          <span class="tag">COUNTDOWN</span>
          <span class="tag accent" id="sessionTag">STANDBY</span>
        </div>
        <div class="countWrap">
          <div class="countDigits" id="countdownDigits">00:00:00</div>
          <div class="countSmall">
            <span id="countLabelSmall">OPENS IN</span>
            <span class="muted" id="gateLine">RED @ 07:15 • LIVE 07:30–10:30 MT</span>
          </div>
        </div>
      </div>

      <!-- LEFT MID (Data / Notes) -->
      <div class="panel" id="leftMid">
        <div class="titleRow">
          <span class="tag">THREAT AS NEAR</span>
          <span class="tag accent">LOCK-IN</span>
        </div>
        <div style="padding: 10px 12px 12px;">
          <ul class="clean">
            <li>A+ setups only</li>
            <li>No overtrade / no revenge</li>
            <li>Hydrate • breathe • calm focus</li>
            <li>One clean trade &gt; ten average</li>
            <li>When target hits: DONE</li>
          </ul>
        </div>
      </div>

      <!-- CENTER MID (Execution) -->
      <div class="panel" id="centerMid">
        <div class="titleRow">
          <span class="tag">EXECUTION</span>
          <span class="tag accent" id="execTag">5m</span>
          <span class="tag" style="margin-left:auto" id="execState">FOCUS</span>
        </div>

        <!-- Stark Core HUD behind chart -->
        <div class="coreWrap">
          <div class="core">
            <div class="ticks"></div>
            <div class="ring r1"></div>
            <div class="ring r2"></div>
            <div class="ring r3"></div>
            <div class="ring r4"></div>
            <div class="ringGlow"></div>
          </div>
        </div>

        <!-- Motivation watermark (Mode 1) -->
        <div class="motivation watermark" id="motivationWatermark"></div>

        <!-- Iframe chart -->
        <div class="frameWrap" style="height: calc(100% - 0px);">
          <iframe class="chart" id="chart5m" loading="lazy" allow="clipboard-write; fullscreen"></iframe>
        </div>

        <!-- Motivation badge (Mode 2) -->
        <div class="motivationBadge" id="motivationBadge"></div>
      </div>

      <!-- RIGHT MID (Structure + Context stacked) -->
      <div class="panel" id="rightMid">
        <div class="titleRow">
          <span class="tag">STRUCTURE</span>
          <span class="tag accent">1H</span>
          <span class="tag" style="margin-left:auto">ALIGN</span>
        </div>
        <div style="position:relative; height: calc(50% - 6px); padding: 10px 10px 6px;">
          <iframe class="chart" id="chart1h" loading="lazy" allow="clipboard-write; fullscreen" style="border-radius:14px;"></iframe>
        </div>

        <div class="titleRow" style="border-top:1px solid var(--line2);">
          <span class="tag">CONTEXT</span>
          <span class="tag accent">4H</span>
          <span class="tag" style="margin-left:auto">BIAS</span>
        </div>
        <div style="position:relative; height: calc(50% - 6px); padding: 10px 10px 10px;">
          <iframe class="chart" id="chart4h" loading="lazy" allow="clipboard-write; fullscreen" style="border-radius:14px;"></iframe>
        </div>
      </div>

      <!-- BOTTOM ROW -->
      <div id="bottom">

        <div class="bpanel">
          <div class="titleRow">
            <span class="tag">RULES</span>
            <span class="tag accent" id="ruleState">STANDBY</span>
          </div>
          <div class="content">
            <ul class="clean" id="rulesList">
              <li>Wait confirmations (VWAP bias + 9/21 aligned)</li>
              <li>Pullback + reclaim entries only</li>
              <li>No chase candles</li>
              <li>Session gate only</li>
              <li>Hit target = shut it down</li>
            </ul>
          </div>
        </div>

        <div class="bpanel">
          <div class="titleRow">
            <span class="tag">RISK</span>
            <span class="tag accent">CONTROL</span>
          </div>
          <div class="content">
            <div class="statGrid">
              <div class="stat">
                <div class="k">Daily max loss</div>
                <div class="v">$ <b id="dailyMaxLoss">TBD</b></div>
              </div>
              <div class="stat">
                <div class="k">Daily target</div>
                <div class="v">$ <b id="dailyTarget">TBD</b></div>
              </div>
              <div class="stat">
                <div class="k">Weekly target</div>
                <div class="v">$ <b id="weeklyTarget">TBD</b></div>
              </div>
              <div class="stat">
                <div class="k">Position limits</div>
                <div class="v"><b id="posLimits">TBD</b></div>
              </div>
            </div>
          </div>
        </div>

        <div class="bpanel">
          <div class="titleRow">
            <span class="tag">SYSTEM</span>
            <span class="tag accent" id="sysBadge">ONLINE</span>
          </div>
          <div class="content">
            <div class="small muted">MODEL</div>
            <div style="margin-top:6px; font-size:14px; letter-spacing:1.6px;">
              SNIPER v3 • VWAP + 9/21
            </div>
            <div style="margin-top:10px;" class="small muted">GATE</div>
            <div style="margin-top:6px; font-size:12px; letter-spacing:1.6px;">
              07:30–10:30 MT • Pre-open red @ 07:15
            </div>
            <div style="margin-top:10px;" class="small muted">STATUS</div>
            <div style="margin-top:6px; font-size:12px; letter-spacing:1.6px;" id="statusLine">
              Standby: structure • prep • calm
            </div>
          </div>
        </div>

        <div class="bpanel">
          <div class="titleRow">
            <span class="tag">MOTIVATION</span>
            <span class="tag accent" id="motState">OFF</span>
          </div>
          <div class="content">
            <div class="small muted">3 MODES</div>
            <ul class="clean" style="margin-top:8px;">
              <li>Watermark behind execution</li>
              <li>Corner badge icon</li>
              <li>Full overlay during boot / mamba</li>
            </ul>
            <div class="small muted" style="margin-top:10px;">ADD IMAGE</div>
            <div style="margin-top:6px; font-size:11px; letter-spacing:1.2px; color:rgba(255,255,255,.72);">
              Upload your image to: <b>assets/motivation.jpg</b>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    /* =========================
      CONFIG — YOU EDIT THIS
    ========================== */
    const CONFIG = {
      timezone: "America/Denver", // MT
      openHour: 7, openMinute: 30,
      sessionEndHour: 10, sessionEndMinute: 30,
      preopenMinutes: 15,

      // Your symbol label (display only)
      symbolLabel: "MNQ1!",

      // IFRAME CHART URLS (BEST PRACTICE)
      // You can use TradingView chart URLs or your saved layout URLs.
      // IMPORTANT: you must be logged into TradingView in this browser.
      chart5mUrl: "https://www.tradingview.com/chart/?symbol=CME_MINI%3AMNQ1!&interval=5",
      chart1hUrl: "https://www.tradingview.com/chart/?symbol=CME_MINI%3AMNQ1!&interval=60",
      chart4hUrl: "https://www.tradingview.com/chart/?symbol=CME_MINI%3AMNQ1!&interval=240",

      // Motivation image path (put file in repo)
      motivationImageUrl: "assets/motivation.jpg",

      // Quotes (more + better)
      quotes: [
        "THE JOB'S NOT FINISHED.",
        "LOCK IN.",
        "DISCIPLINE OVER EMOTION.",
        "CONTROL THE PROCESS.",
        "ONE GOOD TRADE.",
        "DON'T CHASE. LET IT COME.",
        "NOISE OFF. READ STRUCTURE.",
        "PATIENT. PRECISE. DEADLY.",
        "YOU DON'T RISE TO GOALS — YOU FALL TO SYSTEMS.",
        "CALM MIND. SHARP EDGE.",
        "A+ OR NOTHING.",
        "EXECUTE. THEN EXIT."
      ],
      quoteEveryMs: 9000,

      // Boot lines
      bootLines: [
        "[MCX] initializing core modules…",
        "[HUD] grid overlay online",
        "[SYS] time sync: MT",
        "[CHART] linking execution frames",
        "[RISK] gates armed",
        "[QUOTE] mamba feed loaded",
        "[READY] awaiting user arm"
      ]
    };

    /* =========================
      DOM
    ========================== */
    const $ = (id)=>document.getElementById(id);

    const el = {
      boot: $("boot"),
      term: $("term"),
      termCmd: $("termCmd"),
      bootStatus: $("bootStatus"),
      bootTheme: $("bootTheme"),
      bootMotivation: $("bootMotivation"),
      bootArm: $("bootArm"),
      bootSkip: $("bootSkip"),
      flash: $("flash"),

      modeTag: $("modeTag"),
      sessionTag: $("sessionTag"),
      ruleState: $("ruleState"),
      countdownDigits: $("countdownDigits"),
      countLabelSmall: $("countLabelSmall"),
      gateLine: $("gateLine"),
      nowTime: $("nowTime"),
      nowDate: $("nowDate"),
      quoteLine: $("quoteLine"),

      symLabel: $("symLabel"),

      mambaBtn: $("mambaBtn"),
      themeBtn: $("themeBtn"),
      quotesBtn: $("quotesBtn"),
      motBtn: $("motBtn"),
      fullBtn: $("fullBtn"),

      chart5m: $("chart5m"),
      chart1h: $("chart1h"),
      chart4h: $("chart4h"),

      motWatermark: $("motivationWatermark"),
      motBadge: $("motivationBadge"),
      motOverlay: $("motivationOverlay"),
      motState: $("motState"),

      statusLine: $("statusLine"),
      execState: $("execState"),
      sysBadge: $("sysBadge")
    };

    /* =========================
      STATE
    ========================== */
    let quoteOn = true;
    let quoteIdx = 0;

    let motivationOn = false;
    // 3 modes can be combined; default show watermark + badge when ON
    let motModeWatermark = true;
    let motModeBadge = true;
    let motModeOverlay = true;

    // theme cycle: stark -> purple -> mamba (manual)
    let theme = "stark"; // stark | purple | mamba

    function two(n){ return String(n).padStart(2,"0"); }
    function formatHMS(ms){
      const s = Math.max(0, Math.floor(ms/1000));
      const hh = Math.floor(s/3600);
      const mm = Math.floor((s%3600)/60);
      const ss = s%60;
      return `${two(hh)}:${two(mm)}:${two(ss)}`;
    }

    function mtNowParts(){
      const now = new Date();
      const dtf = new Intl.DateTimeFormat("en-US", {
        timeZone: CONFIG.timezone,
        hour12: true,
        weekday: "long",
        month: "long",
        day: "2-digit",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit"
      });
      return dtf.formatToParts(now).reduce((acc,p)=>{
        if(p.type !== "literal") acc[p.type]=p.value;
        return acc;
      }, {});
    }

    function mtDateObjectForToday(h, m, s=0){
      const now = new Date();
      const parts = new Intl.DateTimeFormat("en-CA", {
        timeZone: CONFIG.timezone, year:"numeric", month:"2-digit", day:"2-digit"
      }).formatToParts(now).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
      const y = +parts.year, mo = +parts.month, d = +parts.day;

      const guessUtc = new Date(Date.UTC(y, mo-1, d, h, m, s));
      const mtDisplayed = new Intl.DateTimeFormat("en-US", {
        timeZone: CONFIG.timezone,
        hour12:false,
        year:"numeric", month:"2-digit", day:"2-digit",
        hour:"2-digit", minute:"2-digit", second:"2-digit"
      }).formatToParts(guessUtc).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});

      const deltaSeconds = (+mtDisplayed.hour - h)*3600 + (+mtDisplayed.minute - m)*60 + (+mtDisplayed.second - s);
      return new Date(guessUtc.getTime() - deltaSeconds*1000);
    }

    function computeSessionState(){
      const now = new Date();
      const open = mtDateObjectForToday(CONFIG.openHour, CONFIG.openMinute, 0);
      const preopen = new Date(open.getTime() - CONFIG.preopenMinutes*60*1000);
      const end = mtDateObjectForToday(CONFIG.sessionEndHour, CONFIG.sessionEndMinute, 0);

      if(now < preopen) return {phase:"standby", mode:"stark", label:"STANDBY"};
      if(now >= preopen && now < open) return {phase:"armed", mode:"stark", label:"ARMED"};
      if(now >= open && now < end) return {phase:"live", mode:"mamba", label:"LIVE"};
      return {phase:"post", mode:"stark", label:"POST"};
    }

    function setTheme(next){
      theme = next;
      document.body.classList.remove("mode-stark","mode-purple","mode-mamba");
      document.body.classList.add(`mode-${theme}`);
      el.modeTag.textContent = theme.toUpperCase();
      if(theme === "stark") el.themeBtn.textContent = "PURPLE";
      if(theme === "purple") el.themeBtn.textContent = "STARK";
      if(theme === "mamba") el.themeBtn.textContent = "STARK";
    }

    function redFlash(){
      el.flash.classList.remove("go");
      void el.flash.offsetWidth;
      el.flash.classList.add("go");
    }

    function enterFullscreen(){
      const root = document.documentElement;
      const req = root.requestFullscreen || root.webkitRequestFullscreen || root.msRequestFullscreen;
      if(req) req.call(root);
    }

    function toggleMotivation(){
      motivationOn = !motivationOn;
      el.motBtn.textContent = `MOTIVATION: ${motivationOn ? "ON" : "OFF"}`;
      el.bootMotivation.textContent = `MOTIVATION: ${motivationOn ? "ON" : "OFF"}`;
      el.motState.textContent = motivationOn ? "ON" : "OFF";

      // Modes always available; when ON show watermark+badge; overlay is used during boot/mamba
      el.motWatermark.style.backgroundImage = `url('${CONFIG.motivationImageUrl}')`;
      el.motBadge.style.backgroundImage = `url('${CONFIG.motivationImageUrl}')`;
      el.motOverlay.style.backgroundImage = `url('${CONFIG.motivationImageUrl}')`;

      el.motWatermark.classList.toggle("on", motivationOn && motModeWatermark);
      el.motBadge.classList.toggle("on", motivationOn && motModeBadge);
    }

    function rotateQuote(){
      if(!quoteOn) return;
      quoteIdx = (quoteIdx + 1) % CONFIG.quotes.length;
      el.quoteLine.textContent = CONFIG.quotes[quoteIdx];
    }

    function updateClockAndCountdown(){
      const parts = mtNowParts();
      el.nowTime.textContent = `${parts.hour}:${parts.minute}:${parts.second} ${parts.dayPeriod}`;
      el.nowDate.textContent = `${parts.weekday}, ${parts.month} ${parts.day}, ${parts.year}`;

      const now = new Date();
      const open = mtDateObjectForToday(CONFIG.openHour, CONFIG.openMinute, 0);
      let target = open;

      if(now >= open){
        const tomorrow = new Date(now.getTime() + 24*3600*1000);
        const tParts = new Intl.DateTimeFormat("en-CA", {
          timeZone: CONFIG.timezone, year:"numeric", month:"2-digit", day:"2-digit"
        }).formatToParts(tomorrow).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
        const y = +tParts.year, mo = +tParts.month, d = +tParts.day;

        const guess = new Date(Date.UTC(y, mo-1, d, CONFIG.openHour, CONFIG.openMinute, 0));
        const mtDisp = new Intl.DateTimeFormat("en-US", {
          timeZone: CONFIG.timezone, hour12:false, hour:"2-digit", minute:"2-digit", second:"2-digit"
        }).formatToParts(guess).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
        const deltaSec = (+mtDisp.hour - CONFIG.openHour)*3600 + (+mtDisp.minute - CONFIG.openMinute)*60 + (+mtDisp.second - 0);
        target = new Date(guess.getTime() - deltaSec*1000);
      }

      const ms = target.getTime() - now.getTime();
      el.countdownDigits.textContent = formatHMS(ms);

      const preopenMs = CONFIG.preopenMinutes*60*1000;
      if(ms > 0 && ms <= preopenMs){
        el.countdownDigits.classList.add("pulse");
      } else {
        el.countdownDigits.classList.remove("pulse");
      }
    }

    function applyAutoSessionMode(){
      const st = computeSessionState();

      el.sessionTag.textContent = st.label;
      el.ruleState.textContent = st.label;

      if(st.phase === "live"){
        el.countLabelSmall.textContent = "MARKET OPEN";
        el.statusLine.textContent = "MAMBA: execute clean • no noise • follow system";
        el.execState.textContent = "KILL MODE";
      } else if(st.phase === "armed"){
        el.countLabelSmall.textContent = "OPENS IN";
        el.statusLine.textContent = "ARMED: breathe • hydrate • wait for A+";
        el.execState.textContent = "PREP";
      } else if(st.phase === "post"){
        el.countLabelSmall.textContent = "NEXT OPEN";
        el.statusLine.textContent = "POST: review • recover • no more hunting";
        el.execState.textContent = "REVIEW";
      } else {
        el.countLabelSmall.textContent = "OPENS IN";
        el.statusLine.textContent = "STANDBY: structure • prep • calm";
        el.execState.textContent = "FOCUS";
      }

      // Auto to mamba during live unless user forced purple/stark
      // We won't auto-switch theme if user manually selected purple.
      if(st.phase === "live" && theme !== "purple"){
        if(theme !== "mamba"){
          redFlash();
          setTheme("mamba");
          if(motivationOn && motModeOverlay){
            el.motOverlay.classList.add("on");
            setTimeout(()=>el.motOverlay.classList.remove("on"), 900);
          }
        }
      }
    }

    function mountCharts(){
      // NOTE: TradingView may block iframes in some scenarios.
      // This is still the cleanest if it works for your setup + login.
      // If blocked, we’ll switch to TradingView widget or embed-ready URLs.
      el.chart5m.src = CONFIG.chart5mUrl;
      el.chart1h.src = CONFIG.chart1hUrl;
      el.chart4h.src = CONFIG.chart4hUrl;
    }

    /* =========================
      BOOT SEQUENCE
    ========================== */
    async function runBoot(){
      el.term.textContent = "";
      el.termCmd.textContent = "initializing";
      el.bootStatus.textContent = "BOOTING";
      if(motivationOn && motModeOverlay){
        el.motOverlay.style.backgroundImage = `url('${CONFIG.motivationImageUrl}')`;
        el.motOverlay.classList.add("on");
      }

      for(let i=0;i<CONFIG.bootLines.length;i++){
        await new Promise(r=>setTimeout(r, 260 + Math.random()*220));
        el.term.textContent += CONFIG.bootLines[i] + "\n";
        el.termCmd.textContent = (i < CONFIG.bootLines.length-1) ? "loading" : "ready";
      }
      el.bootStatus.textContent = "READY";
      if(motivationOn && motModeOverlay){
        setTimeout(()=>el.motOverlay.classList.remove("on"), 500);
      }
    }

    function closeBoot(){
      el.boot.style.display = "none";
    }

    /* =========================
      INIT
    ========================== */
    el.symLabel.textContent = CONFIG.symbolLabel;
    setTheme("stark");
    mountCharts();

    // Buttons
    el.fullBtn.addEventListener("click", enterFullscreen);

    el.themeBtn.addEventListener("click", ()=>{
      if(theme === "stark") setTheme("purple");
      else setTheme("stark");
    });

    el.mambaBtn.addEventListener("click", ()=>{
      // Force mamba with full aggressive red flash
      redFlash();
      setTheme("mamba");
      el.sessionTag.textContent = "LIVE";
      el.ruleState.textContent = "EXECUTE";
      el.execState.textContent = "KILL MODE";
      el.statusLine.textContent = "MAMBA: execute clean • no noise • follow system";

      if(motivationOn && motModeOverlay){
        el.motOverlay.classList.add("on");
        setTimeout(()=>el.motOverlay.classList.remove("on"), 900);
      }
    });

    el.quotesBtn.addEventListener("click", ()=>{
      quoteOn = !quoteOn;
      el.quotesBtn.textContent = `QUOTES: ${quoteOn ? "ON" : "OFF"}`;
      el.quoteLine.style.display = quoteOn ? "block" : "none";
    });

    el.motBtn.addEventListener("click", toggleMotivation);

    // Boot buttons
    el.bootTheme.addEventListener("click", ()=>{
      if(theme === "stark") setTheme("purple");
      else setTheme("stark");
      el.bootTheme.textContent = `THEME: ${theme.toUpperCase()}`;
    });

    el.bootMotivation.addEventListener("click", ()=>{
      toggleMotivation();
    });

    el.bootArm.addEventListener("click", async ()=>{
      // Show a mini overlay, fullscreen, then close boot.
      redFlash();
      enterFullscreen();
      await new Promise(r=>setTimeout(r, 350));
      closeBoot();
    });

    el.bootSkip.addEventListener("click", ()=>{
      closeBoot();
    });

    // Boot run
    runBoot();

    // Tick loops
    function tick(){
      updateClockAndCountdown();
      applyAutoSessionMode();
    }
    tick();
    setInterval(tick, 1000);
    setInterval(rotateQuote, CONFIG.quoteEveryMs);
  </script>

</body>
</html>
