<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MISSION CONTROL — BLACK MAMBA WAR ROOM</title>

  <!-- FONT -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#050608;
      --panel:#0b1017;
      --panel2:#070b10;
      --text:#e6f1ff;
      --muted:#9fb3c8;

      /* Accents */
      --blue:#00d0ff;
      --blue2:#00a8ff;
      --blueGlow:rgba(0,208,255,.55);

      --red:#ff2a2a;
      --red2:#ff0000;
      --redGlow:rgba(255,42,42,.60);

      --purple:#b100ff;
      --purple2:#7a00ff;
      --purpleGlow:rgba(177,0,255,.55);

      /* Runtime (changes by theme) */
      --accent:var(--blue);
      --accent2:var(--blue2);
      --glow:var(--blueGlow);

      --radius:18px;
      --radius2:14px;
      --stroke:2px;

      --shadow:0 0 18px var(--glow), 0 0 55px rgba(0,0,0,.55);
      --shadowSoft:0 0 10px rgba(255,255,255,.05), 0 16px 50px rgba(0,0,0,.65);

      --grainOpacity:.08;
      --wmOpacity:.10;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font-family:"Orbitron", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x:hidden;

      background:
        radial-gradient(1200px 700px at 50% 15%, rgba(255,42,42,.10), transparent 58%),
        radial-gradient(900px 600px at 10% 85%, rgba(177,0,255,.06), transparent 62%),
        linear-gradient(180deg, #040507, #07080c 45%, #040507);
    }

    /* ===== THEMES ===== */
    body.theme-blue{
      --accent:var(--blue);
      --accent2:var(--blue2);
      --glow:var(--blueGlow);
      background:
        radial-gradient(1200px 700px at 50% 15%, rgba(0,208,255,.10), transparent 58%),
        radial-gradient(900px 600px at 10% 85%, rgba(0,208,255,.06), transparent 62%),
        linear-gradient(180deg, #040507, #07080c 45%, #040507);
    }
    body.theme-purple{
      --accent:var(--purple);
      --accent2:var(--purple2);
      --glow:var(--purpleGlow);
      background:
        radial-gradient(1200px 700px at 50% 15%, rgba(177,0,255,.14), transparent 58%),
        radial-gradient(900px 600px at 10% 85%, rgba(177,0,255,.08), transparent 62%),
        linear-gradient(180deg, #040507, #07080c 45%, #040507);
    }
    body.theme-mamba{
      --accent:var(--red);
      --accent2:var(--red2);
      --glow:var(--redGlow);
      background:
        radial-gradient(1200px 700px at 50% 15%, rgba(255,42,42,.16), transparent 58%),
        radial-gradient(900px 600px at 10% 85%, rgba(177,0,255,.08), transparent 62%),
        radial-gradient(1000px 700px at 90% 70%, rgba(255,0,0,.07), transparent 65%),
        linear-gradient(180deg, #000, #05050a 45%, #000);
    }

    /* ===== WAR ROOM BREATH PULSE ===== */
    body.theme-mamba .panel{
      animation: breathe 4.8s ease-in-out infinite;
    }
    @keyframes breathe{
      0%,100%{filter: drop-shadow(0 0 0 rgba(0,0,0,0));}
      50%{filter: drop-shadow(0 0 10px rgba(255,42,42,.10));}
    }

    /* ===== WRAP / FRAME ===== */
    .wrap{max-width: 1680px; margin: 18px auto 28px; padding: 0 18px;}
    .frame{
      border: var(--stroke) solid rgba(255,255,255,.08);
      border-radius: 24px;
      padding: 14px;
      position: relative;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.015));
      box-shadow: var(--shadowSoft);
      overflow:hidden;
    }
    .frame::before{
      content:"";
      position:absolute;
      inset:10px;
      border-radius: 18px;
      border: var(--stroke) solid rgba(255,255,255,.04);
      pointer-events:none;
    }

    /* subtle grain */
    .frame::after{
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      opacity:var(--grainOpacity);
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
    }

    /* Neon side bars */
    .neon-bar{
      position:absolute;
      top: 110px;
      bottom: 140px;
      width: 6px;
      background: linear-gradient(180deg, transparent, var(--accent), transparent);
      filter: drop-shadow(0 0 10px var(--accent)) drop-shadow(0 0 22px rgba(255,255,255,.12));
      opacity:.95;
    }
    .neon-bar.left{left: 12px}
    .neon-bar.right{right: 12px}

    /* ===== MOTIVATION WATERMARK (giant faint) ===== */
    .watermark{
      position:absolute;
      inset:0;
      display:none;
      pointer-events:none;
      opacity: var(--wmOpacity);
      background-repeat:no-repeat;
      background-position: 50% 55%;
      background-size: min(900px, 72vw);
      filter: drop-shadow(0 0 30px rgba(0,0,0,.35));
      mix-blend-mode: screen;
    }
    .watermark.on{display:block}

    /* ===== PANELS ===== */
    .panel{
      background: linear-gradient(180deg, rgba(12,16,22,.82), rgba(7,10,14,.78));
      border-radius: var(--radius);
      border: var(--stroke) solid rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      position: relative;
      overflow:hidden;
    }
    .panel::after{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius: inherit;
      border: 1px solid rgba(255,255,255,.05);
      pointer-events:none;
    }

    /* ===== HEADER GRID ===== */
    .top{
      display:grid;
      grid-template-columns: 360px 1fr 420px;
      gap: 12px;
      align-items: stretch;
      margin-bottom: 12px;
    }

    .panel-head{padding: 14px 16px;}
    .title-small{
      font-size: 11px; letter-spacing: 2.5px;
      color: rgba(255,255,255,.70);
      text-transform: uppercase;
    }
    .title{
      margin-top: 6px;
      font-size: 22px;
      letter-spacing: 1.2px;
      font-weight: 800;
    }
    .subtitle{
      margin-top: 8px;
      display:flex; gap:10px; align-items:center;
      color: var(--muted);
      font-size: 12px;
      letter-spacing: 1.2px;
    }
    .dot{
      width:10px;height:10px;border-radius:99px;
      background: var(--accent);
      box-shadow: 0 0 12px var(--accent);
    }
    .chip{
      margin-left:auto;
      padding:6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.25);
      font-size: 11px;
      letter-spacing: 1.2px;
      color: rgba(255,255,255,.82);
      display:flex; gap:8px; align-items:center;
    }
    .chip b{color: var(--accent)}

    .btn{
      cursor:pointer;
      user-select:none;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.28);
      color: rgba(255,255,255,.86);
      font-family: inherit;
      font-size: 11px;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px;
      min-width: 118px;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.18)}
    .btn:active{transform: translateY(0px)}
    .btn.red{border-color: rgba(255,42,42,.40); box-shadow: 0 0 14px rgba(255,42,42,.10)}
    .btn.purple{border-color: rgba(177,0,255,.40); box-shadow: 0 0 14px rgba(177,0,255,.10)}
    .btn.blue{border-color: rgba(0,208,255,.40); box-shadow: 0 0 14px rgba(0,208,255,.10)}

    .clock{
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      padding: 10px 10px;
      min-height: 110px;
    }
    .clock .time{
      font-size: 52px;
      font-weight: 800;
      letter-spacing: 2px;
      text-shadow: 0 0 18px rgba(255,255,255,.10);
    }
    .clock .date{
      margin-top: 8px;
      font-size: 12px;
      letter-spacing: 2.2px;
      color: rgba(255,255,255,.75);
      text-transform: uppercase;
    }
    .mamba-quote{
      margin-top: 10px;
      font-size: 12px;
      letter-spacing: 2px;
      color: var(--accent);
      text-transform: uppercase;
      text-shadow: 0 0 18px var(--glow);
    }

    .rightTop{
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      padding: 12px 12px;
      min-height: 110px;
      gap:10px;
    }
    .row{display:flex; gap:10px; align-items:center; justify-content:space-between;}
    .countLabel{font-size: 11px; letter-spacing: 2.5px; text-transform: uppercase; color: rgba(255,255,255,.72);}
    .openTime{font-size: 12px; letter-spacing: 2px; color: rgba(255,255,255,.82);}
    .countdown{
      display:flex;
      align-items:baseline;
      justify-content:flex-end;
      gap:10px;
      padding-bottom: 6px;
    }
    .countdown .digits{
      font-size: 36px;
      font-weight: 800;
      letter-spacing: 2px;
      color: var(--accent);
      text-shadow: 0 0 18px var(--glow);
    }
    .countdown small{
      font-size: 11px;
      letter-spacing: 2px;
      color: rgba(255,255,255,.65);
      text-transform: uppercase;
    }
    .hint{font-size: 10px; letter-spacing: 1.6px; color: rgba(255,255,255,.55);}

    .pulse{animation: pulse 1s infinite;}
    @keyframes pulse{0%{opacity:1}50%{opacity:.55}100%{opacity:1}}

    /* ===== TAGS ===== */
    .panel-titlebar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding: 10px 12px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      background: linear-gradient(180deg, rgba(0,0,0,.34), rgba(0,0,0,.06));
    }
    .panel-titlebar .left{display:flex; gap:10px; align-items:center;}
    .tag{
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      font-size: 10px;
      letter-spacing: 1.8px;
      text-transform: uppercase;
      color: rgba(255,255,255,.85);
      background: rgba(0,0,0,.22);
      white-space:nowrap;
    }
    .tag.accent{border-color: color-mix(in oklab, var(--accent) 45%, transparent); color: color-mix(in oklab, var(--accent) 85%, white); box-shadow: 0 0 12px color-mix(in oklab, var(--accent) 20%, transparent);}
    .tag.red{border-color: rgba(255,42,42,.40); color: rgba(255,42,42,.95); box-shadow: 0 0 12px rgba(255,42,42,.18);}
    .tag.purple{border-color: rgba(177,0,255,.40); color: rgba(177,0,255,.95); box-shadow: 0 0 12px rgba(177,0,255,.18);}

    /* ===== MAIN GRID ===== */
    .main{
      display:grid;
      grid-template-columns: 2.15fr 1fr;
      gap: 12px;
      margin-bottom: 12px;
    }
    .stack{display:grid; grid-template-rows: 1fr 1fr; gap: 12px;}

    .tvWrap{padding:0; overflow:hidden;}
    .tv{width:100%; height: 560px; background: rgba(0,0,0,.25);}
    .tv.small{height: 270px;}

    .tv iframe{
      width:100%; height:100%;
      border:0;
      display:block;
      background: rgba(0,0,0,.25);
    }

    /* ===== BOTTOM ===== */
    .bottom{
      display:grid;
      grid-template-columns: 1.05fr 1.35fr 1.6fr;
      gap: 12px;
      margin-bottom: 12px;
    }
    .list{padding: 12px 14px 14px;}
    .list .item{
      display:flex; align-items:center; gap: 10px;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.20);
      margin-top: 10px;
    }
    .cb{
      width: 14px; height: 14px;
      border-radius: 4px;
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(255,255,255,.05);
      box-shadow: inset 0 0 0 2px rgba(0,0,0,.25);
      flex: 0 0 auto;
    }
    .item span{font-size: 12px; letter-spacing: 1.2px; color: rgba(255,255,255,.88);}

    .rules{padding: 12px 14px 14px;}
    .rules ul{
      margin: 10px 0 0;
      padding: 0 0 0 18px;
      color: rgba(255,255,255,.84);
      font-size: 12px;
      letter-spacing: 1.1px;
      line-height: 1.45;
    }
    .rules li{margin: 6px 0}
    .rules .headerLine{display:flex; gap: 10px; align-items:center; justify-content:space-between;}

    .risk{padding: 12px 14px 14px;}
    .riskGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    .card{
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.20);
      padding: 10px 10px 12px;
      min-height: 74px;
    }
    .card .k{font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: rgba(255,255,255,.62);}
    .card .v{margin-top: 8px; font-size: 14px; letter-spacing: 1.6px; color: rgba(255,255,255,.90);}
    .card .v b{color: var(--accent)}

    /* ===== FOOTER STATUS ===== */
    .status{display:flex; justify-content:center; align-items:center; gap: 14px; padding: 16px;}
    .statusBox{
      min-width: 420px;
      text-align:center;
      padding: 14px 18px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.28);
      box-shadow: 0 0 0 1px rgba(255,255,255,.03), 0 0 25px rgba(0,0,0,.35);
    }
    .statusBox .big{font-size: 18px; letter-spacing: 4px; text-transform: uppercase; color: rgba(255,255,255,.92);}
    .statusBox .small{margin-top: 8px; font-size: 11px; letter-spacing: 2px; color: rgba(255,255,255,.62); text-transform: uppercase;}

    /* ===== MUSIC DOCK ===== */
    .musicDock{margin-top: 10px; display:none;}
    .musicDock.on{display:block}
    .musicDock iframe{
      width:100%;
      height: 92px;
      border: 0;
      border-radius: 14px;
      background: rgba(0,0,0,.25);
      box-shadow: var(--shadow);
    }

    /* ===== CORNER LOGO (small) ===== */
    .cornerLogo{
      position:absolute;
      left: 22px;
      bottom: 18px;
      width: 92px;
      height: 92px;
      opacity:.95;
      pointer-events:none;
      display:none;
      filter: drop-shadow(0 0 16px rgba(0,0,0,.35)) drop-shadow(0 0 18px var(--glow));
    }
    .cornerLogo.on{display:block}

    /* ===== SPLASH (center) ===== */
    .splash{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: radial-gradient(900px 600px at 50% 50%, rgba(255,42,42,.12), rgba(0,0,0,.88));
      z-index: 9999;
      pointer-events:none;
      opacity:0;
      transition: opacity .25s ease;
    }
    .splash.on{display:flex; opacity:1;}
    .splashCard{
      width: min(820px, 92vw);
      padding: 22px 22px 18px;
      border-radius: 22px;
      border: 2px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.35);
      box-shadow: 0 0 30px rgba(0,0,0,.6), 0 0 45px var(--glow);
      text-align:center;
      position:relative;
      overflow:hidden;
    }
    .splashCard::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 320px at 50% 10%, rgba(255,42,42,.18), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .splashImg{
      width: 240px;
      height:auto;
      display:block;
      margin: 0 auto 14px;
      filter: drop-shadow(0 0 20px rgba(0,0,0,.5)) drop-shadow(0 0 22px var(--glow));
      position:relative;
      z-index:1;
    }
    .splashTitle{
      position:relative;
      z-index:1;
      font-size: 18px;
      letter-spacing: 4px;
      text-transform: uppercase;
    }
    .splashSub{
      position:relative;
      z-index:1;
      margin-top:10px;
      font-size: 12px;
      letter-spacing: 2.2px;
      color: rgba(255,255,255,.75);
      text-transform: uppercase;
    }

    /* ===== TV / Mobile ===== */
    @media (max-width: 1200px){
      .top{grid-template-columns: 1fr}
      .main{grid-template-columns: 1fr}
      .stack{grid-template-rows:auto}
      .bottom{grid-template-columns: 1fr}
      .tv{height: 460px}
      .tv.small{height: 240px}
      .neon-bar{display:none}
      .cornerLogo{display:none !important;}
    }

    /* ===== ENTER OVERLAY (for fullscreen + autoplay limitations) ===== */
    .enterOverlay{
      position:fixed; inset:0;
      z-index: 10000;
      display:flex;
      align-items:center;
      justify-content:center;
      background: radial-gradient(900px 600px at 50% 45%, rgba(255,42,42,.10), rgba(0,0,0,.92));
    }
    .enterCard{
      width:min(780px, 92vw);
      padding: 20px;
      border-radius: 22px;
      border: 2px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.35);
      box-shadow: 0 0 30px rgba(0,0,0,.6), 0 0 55px var(--glow);
      text-align:center;
    }
    .enterTitle{
      font-size: 18px;
      letter-spacing: 4px;
      text-transform: uppercase;
    }
    .enterSub{
      margin-top:10px;
      font-size: 12px;
      letter-spacing: 2.2px;
      color: rgba(255,255,255,.75);
      text-transform: uppercase;
      line-height:1.5;
    }
    .enterButtons{
      margin-top:16px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:center;
    }
  </style>
</head>

<body class="theme-mamba">
  <!-- ENTER OVERLAY (needed for fullscreen + any auto-launch in browsers) -->
  <div class="enterOverlay" id="enterOverlay">
    <div class="enterCard">
      <div class="enterTitle">ENTER BLACK MAMBA WAR ROOM</div>
      <div class="enterSub">
        Tap <b>ARM</b> to auto-fullscreen (browser rules require a click).<br>
        If you’re logged into TradingView in this browser, charts load clean with your session.
      </div>
      <div class="enterButtons">
        <button class="btn red" id="enterBtn">ARM + FULLSCREEN</button>
        <button class="btn" id="skipBtn">SKIP</button>
      </div>
    </div>
  </div>

  <!-- MAMBA SPLASH -->
  <div class="splash" id="mambaSplash" aria-hidden="true">
    <div class="splashCard">
      <img class="splashImg" id="splashImg" alt="Mamba" />
      <div class="splashTitle">BLACK MAMBA — LOCK IN</div>
      <div class="splashSub" id="splashLine">DISCIPLINE. CLARITY. EXECUTION.</div>
    </div>
  </div>

  <div class="wrap">
    <div class="frame" id="frame">
      <div class="neon-bar left"></div>
      <div class="neon-bar right"></div>

      <!-- Watermark + Corner logo (motivational image options) -->
      <div class="watermark on" id="wm"></div>
      <img class="cornerLogo on" id="cornerLogo" alt="Mamba Logo"/>

      <!-- TOP -->
      <div class="top">
        <div class="panel">
          <div class="panel-head">
            <div class="title-small">NEON ELITE • BLACK MAMBA WAR ROOM</div>
            <div class="title">MISSION CONTROL</div>
            <div class="subtitle">
              <span class="dot" id="statusDot"></span>
              <span id="modeLabel">STANDBY</span>
              <span class="chip"><span>SYMBOL</span> <b id="symLabel">CME_MINI:MNQ1!</b></span>
            </div>

            <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
              <button class="btn red" id="mambaToggle">MAMBA</button>
              <button class="btn purple" id="purpleToggle">PURPLE</button>
              <button class="btn blue" id="musicToggle">MUSIC: OFF</button>
              <button class="btn" id="quotesToggle">QUOTES: ON</button>
              <button class="btn" id="fullscreenBtn">FULLSCREEN</button>
              <button class="btn" id="settingsBtn">SETTINGS</button>
            </div>
          </div>
        </div>

        <div class="panel clock">
          <div class="time" id="nowTime">--:--:--</div>
          <div class="date" id="nowDate">---</div>
          <div class="mamba-quote" id="quoteLine">THE JOB'S NOT FINISHED.</div>
        </div>

        <div class="panel rightTop">
          <div class="row">
            <div>
              <div class="countLabel">COUNTDOWN TO OPEN</div>
              <div class="openTime" id="openTimeLabel">07:30 MT</div>
            </div>
            <div class="tag accent" id="sessionTag">STANDBY</div>
          </div>

          <div class="countdown">
            <div><small id="countLabelSmall">OPENS IN</small></div>
            <div class="digits" id="countdownDigits">00:00:00</div>
          </div>

          <div class="hint" id="hintLine">Red at 07:15 • Execute 07:30–10:30 MT</div>

          <div class="musicDock" id="musicDock">
            <iframe
              id="spotifyFrame"
              src="PLAYLIST_URL"
              allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
              loading="lazy"
              title="Spotify Player"
            ></iframe>
          </div>
        </div>
      </div>

      <!-- MAIN (Charts) -->
      <div class="main">
        <!-- LEFT BIG (5m) -->
        <div class="panel tvWrap">
          <div class="panel-titlebar">
            <div class="left">
              <div class="tag" id="leftTag">MNQ • 5m</div>
              <div class="tag accent" id="leftTag2">EXECUTION</div>
            </div>
            <div class="tag accent" id="focusTag">FOCUS</div>
          </div>
          <div id="tv_5m" class="tv">
            <iframe id="if_5m" title="MNQ 5m"></iframe>
          </div>
        </div>

        <!-- RIGHT STACK (1H + 4H) -->
        <div class="stack">
          <div class="panel tvWrap">
            <div class="panel-titlebar">
              <div class="left">
                <div class="tag" id="rtTag">MNQ • 1H</div>
                <div class="tag" id="rtTag2">STRUCTURE</div>
              </div>
              <div class="tag accent" id="rtBadge">ALIGN</div>
            </div>
            <div id="tv_1h" class="tv small">
              <iframe id="if_1h" title="MNQ 1h"></iframe>
            </div>
          </div>

          <div class="panel tvWrap">
            <div class="panel-titlebar">
              <div class="left">
                <div class="tag" id="rbTag">MNQ • 4H</div>
                <div class="tag" id="rbTag2">CONTEXT</div>
              </div>
              <div class="tag accent" id="rbBadge">BIAS</div>
            </div>
            <div id="tv_4h" class="tv small">
              <iframe id="if_4h" title="MNQ 4h"></iframe>
            </div>
          </div>
        </div>
      </div>

      <!-- BOTTOM -->
      <div class="bottom">
        <div class="panel">
          <div class="panel-titlebar">
            <div class="left"><div class="tag">THREAT IS NEAR</div></div>
            <div class="tag accent" id="threatBadge">LOCK-IN</div>
          </div>
          <div class="list">
            <div class="item"><div class="cb"></div><span>A+ setups only</span></div>
            <div class="item"><div class="cb"></div><span>No overtrade / no revenge</span></div>
            <div class="item"><div class="cb"></div><span>Hydrate • breathe (parasympathetic)</span></div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-titlebar">
            <div class="left"><div class="tag">RULES OF ENGAGEMENT</div></div>
            <div class="tag accent" id="rulesBadge">MAMBA</div>
          </div>
          <div class="rules">
            <div class="headerLine">
              <div class="title-small">SESSION: 07:30–10:30 MT</div>
              <div class="tag accent" id="ruleState">STANDBY</div>
            </div>
            <ul id="rulesList">
              <li>Wait for confirmations (VWAP bias + 9/21 aligned)</li>
              <li>Pullback + reclaim entries only</li>
              <li>No chase candles</li>
              <li>One good trade &gt; ten average trades</li>
              <li>When daily target is hit: DONE</li>
            </ul>
          </div>
        </div>

        <div class="panel">
          <div class="panel-titlebar">
            <div class="left"><div class="tag">RISK & MONEY CONTROL</div></div>
            <div class="tag accent" id="riskBadge">NO OVERTRADE</div>
          </div>
          <div class="risk">
            <div class="riskGrid">
              <div class="card">
                <div class="k">Daily max loss</div>
                <div class="v">$ <b id="dailyMaxLoss">TBD</b></div>
              </div>
              <div class="card">
                <div class="k">Daily target</div>
                <div class="v">$ <b id="dailyTarget">TBD</b></div>
              </div>
              <div class="card">
                <div class="k">Weekly target</div>
                <div class="v">$ <b id="weeklyTarget">TBD</b></div>
              </div>
              <div class="card">
                <div class="k">Position limits</div>
                <div class="v"><b id="posLimits">TBD</b></div>
              </div>
            </div>

            <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
              <div class="tag" id="buildTag">MODEL: SNIPER v3</div>
              <div class="tag" id="gateTag">GATE: 07:30–10:30</div>
              <div class="tag" id="brokerTag">INSTRUMENT: CME_MINI:MNQ1!</div>
              <div class="tag accent" id="openTvBtn" style="cursor:pointer;">OPEN TRADINGVIEW</div>
            </div>
          </div>
        </div>
      </div>

      <!-- STATUS -->
      <div class="status">
        <div class="statusBox">
          <div class="big" id="statusBig">STANDBY</div>
          <div class="small" id="statusSmall">Red at 07:15 • Execute 07:30–10:30 • Clean reps only</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* =========================
      CONFIG — EDIT THESE
    ========================== */
    const CONFIG = {
      // Futures symbol (use CME_MINI prefix so it never defaults to Apple)
      symbol: "CME_MINI:MNQ1!",
      timezone: "America/Denver", // MT

      openHour: 7,
      openMinute: 30,
      preopenMinutes: 15,
      sessionEndHour: 10,
      sessionEndMinute: 30,

      // If you want charts to open a saved TradingView layout instead of generic chart:
      // Put a full chart URL here (from TradingView Share -> Copy link).
      // Leave blank to use symbol+interval URLs.
      savedLayoutUrl5m: "",
      savedLayoutUrl1h: "",
      savedLayoutUrl4h: "",

      // Motivation image (put this file in your repo, e.g. /assets/mamba.png)
      // 1) Watermark (giant background)
      // 2) Corner logo (small)
      // 3) Splash (center when Mamba arms)
      motivationImageUrl: "assets/mamba.png",

      // Spotify embed (optional)
      spotifyEmbedUrl: "PLAYLIST_URL",

      // Quotes (AGGRESSIVE MAMBA)
      quotes: [
        "THE JOB'S NOT FINISHED.",
        "LOCK IN. NO NOISE.",
        "DISCIPLINE OVER EMOTION.",
        "DON'T CHASE. LET IT COME.",
        "ONE GOOD TRADE. DONE.",
        "EXECUTE THE PLAN. NOTHING ELSE.",
        "CALM MIND. SHARP EDGE.",
        "RISK FIRST. PROFITS FOLLOW.",
        "NO REVENGE. NO HUNTING.",
        "WAIT FOR CONFIRMATION.",
        "YOU DON'T NEED MORE TRADES — YOU NEED BETTER TRADES.",
        "SNIPER ENTRY. CLEAN EXIT.",
        "BREATHE. SEE IT. TAKE IT.",
        "IF IT'S NOT A+, IT'S A NO.",
        "CONTROL OR BE CONTROLLED."
      ],

      quoteRotateMs: 6500, // more frequent

      // Fullscreen behavior:
      // Browsers require a user gesture. We handle that with the ENTER overlay button.
      autoEnterFullscreenOnArm: true,

      // Optional: open TradingView in a new tab after arming (may be blocked unless user gesture).
      autoOpenTradingViewTabOnArm: false,

      // Theme auto by session time (you can still lock manually with MAMBA button)
      autoThemeBySession: true
    };

    /* =========================
      HELPERS
    ========================== */
    const $ = (id)=>document.getElementById(id);
    const two = (n)=>String(n).padStart(2,"0");

    function formatHMS(ms){
      const s = Math.max(0, Math.floor(ms/1000));
      const hh = Math.floor(s/3600);
      const mm = Math.floor((s%3600)/60);
      const ss = s%60;
      return `${two(hh)}:${two(mm)}:${two(ss)}`;
    }

    function mtNowParts(){
      const now = new Date();
      const dtf = new Intl.DateTimeFormat("en-US", {
        timeZone: CONFIG.timezone,
        hour12: true,
        weekday: "long",
        month: "long",
        day: "2-digit",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit"
      });
      return dtf.formatToParts(now).reduce((acc,p)=>{
        if(p.type !== "literal") acc[p.type]=p.value;
        return acc;
      }, {});
    }

    function mtDateObjectForToday(h, m, s=0){
      const now = new Date();
      const parts = new Intl.DateTimeFormat("en-CA", { timeZone: CONFIG.timezone, year:"numeric", month:"2-digit", day:"2-digit" })
        .formatToParts(now).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
      const y = parts.year, mo = parts.month, d = parts.day;

      const guessUtc = new Date(Date.UTC(+y, +mo-1, +d, h, m, s));
      const mtDisplayed = new Intl.DateTimeFormat("en-US", {
        timeZone: CONFIG.timezone,
        hour12:false,
        year:"numeric", month:"2-digit", day:"2-digit",
        hour:"2-digit", minute:"2-digit", second:"2-digit"
      }).formatToParts(guessUtc).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});

      const deltaSeconds = (+mtDisplayed.hour - h)*3600 + (+mtDisplayed.minute - m)*60 + (+mtDisplayed.second - s);
      return new Date(guessUtc.getTime() - deltaSeconds*1000);
    }

    function computeSessionState(){
      const now = new Date();
      const open = mtDateObjectForToday(CONFIG.openHour, CONFIG.openMinute, 0);
      const preopen = new Date(open.getTime() - CONFIG.preopenMinutes*60*1000);
      const end = mtDateObjectForToday(CONFIG.sessionEndHour, CONFIG.sessionEndMinute, 0);

      if(now < preopen) return {mode:"standby", theme:"theme-blue", label:"STANDBY", tag:"STANDBY", statusBig:"STANDBY"};
      if(now >= preopen && now < open) return {mode:"armed", theme:"theme-mamba", label:"ARMED", tag:"ARMED", statusBig:"ARMED"};
      if(now >= open && now < end) return {mode:"live", theme:"theme-mamba", label:"LIVE", tag:"EXECUTE", statusBig:"SESSION LIVE"};
      return {mode:"post", theme:"theme-blue", label:"POST", tag:"CLOSED", statusBig:"SESSION CLOSED"};
    }

    function updateClockAndCountdown(){
      const parts = mtNowParts();
      $("nowTime").textContent = `${parts.hour}:${parts.minute}:${parts.second} ${parts.dayPeriod}`;
      $("nowDate").textContent = `${parts.weekday}, ${parts.month} ${parts.day}, ${parts.year}`;

      const now = new Date();
      const open = mtDateObjectForToday(CONFIG.openHour, CONFIG.openMinute, 0);
      let target = open;

      if(now >= open){
        const tomorrow = new Date(now.getTime() + 24*3600*1000);
        const tParts = new Intl.DateTimeFormat("en-CA", { timeZone: CONFIG.timezone, year:"numeric", month:"2-digit", day:"2-digit" })
          .formatToParts(tomorrow).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
        const y = +tParts.year, mo = +tParts.month, d = +tParts.day;

        const guess = new Date(Date.UTC(y, mo-1, d, CONFIG.openHour, CONFIG.openMinute, 0));
        const mtDisp = new Intl.DateTimeFormat("en-US", { timeZone: CONFIG.timezone, hour12:false, hour:"2-digit", minute:"2-digit", second:"2-digit" })
          .formatToParts(guess).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
        const deltaSec = (+mtDisp.hour - CONFIG.openHour)*3600 + (+mtDisp.minute - CONFIG.openMinute)*60 + (+mtDisp.second - 0);
        target = new Date(guess.getTime() - deltaSec*1000);
      }

      const ms = target.getTime() - now.getTime();
      $("countdownDigits").textContent = formatHMS(ms);

      const preopenMs = CONFIG.preopenMinutes*60*1000;
      if(ms > 0 && ms <= preopenMs) $("countdownDigits").classList.add("pulse");
      else $("countdownDigits").classList.remove("pulse");
    }

    /* =========================
      THEMES + MANUAL OVERRIDE
    ========================== */
    let manualLockedTheme = false;
    let currentTheme = "theme-mamba";

    function setTheme(theme){
      document.body.classList.remove("theme-blue","theme-purple","theme-mamba");
      document.body.classList.add(theme);
      currentTheme = theme;

      // dot follows accent
      const acc = getComputedStyle(document.body).getPropertyValue("--accent").trim();
      $("statusDot").style.background = acc;
      $("statusDot").style.boxShadow = `0 0 12px ${acc}`;

      // tags accent class stays, but looks changes with theme vars
    }

    function applyAutoTheme(){
      if(!CONFIG.autoThemeBySession || manualLockedTheme) return;
      const st = computeSessionState();
      setTheme(st.theme);
      $("modeLabel").textContent = st.label;
      $("sessionTag").textContent = st.tag;
      $("ruleState").textContent = st.tag;
      $("statusBig").textContent = st.statusBig;

      if(st.mode === "live"){
        $("statusSmall").textContent = "BLACK MAMBA: execute clean • no hunting • protect the account";
        $("countLabelSmall").textContent = "MARKET OPEN";
      } else if(st.mode === "armed"){
        $("statusSmall").textContent = "ARMED: breathe • hydrate • wait for A+ • no impulse";
        $("countLabelSmall").textContent = "OPENS IN";
      } else if(st.mode === "post"){
        $("statusSmall").textContent = "POST: review • recover • no more trades";
        $("countLabelSmall").textContent = "NEXT OPEN";
      } else {
        $("statusSmall").textContent = "Standby: structure • prep • calm";
        $("countLabelSmall").textContent = "OPENS IN";
      }
    }

    /* =========================
      QUOTES
    ========================== */
    let quoteOn = true;
    let quoteIdx = 0;

    function rotateQuote(){
      if(!quoteOn) return;
      quoteIdx = (quoteIdx + 1) % CONFIG.quotes.length;
      $("quoteLine").textContent = CONFIG.quotes[quoteIdx];
    }

    /* =========================
      MUSIC
    ========================== */
    let musicOn = false;
    function setMusic(on){
      musicOn = on;
      $("musicDock").classList.toggle("on", musicOn);
      $("musicToggle").textContent = `MUSIC: ${musicOn ? "ON" : "OFF"}`;
      if(CONFIG.spotifyEmbedUrl && CONFIG.spotifyEmbedUrl !== "PLAYLIST_URL"){
        $("spotifyFrame").src = CONFIG.spotifyEmbedUrl;
      }
    }

    /* =========================
      FULLSCREEN
    ========================== */
    async function enterFullscreen(){
      const el = document.documentElement;
      try{
        if(el.requestFullscreen) await el.requestFullscreen();
        else if(el.webkitRequestFullscreen) el.webkitRequestFullscreen();
      }catch(e){}
    }
    async function exitFullscreen(){
      try{
        if(document.exitFullscreen) await document.exitFullscreen();
        else if(document.webkitExitFullscreen) document.webkitExitFullscreen();
      }catch(e){}
    }
    function isFullscreen(){
      return !!(document.fullscreenElement || document.webkitFullscreenElement);
    }

    /* =========================
      TRADINGVIEW EMBED (IFRAME)
      This avoids the widget popups + symbol blocks.
    ========================== */
    function tvChartUrl(symbol, interval){
      // Full TradingView chart page (uses your login session in this browser)
      // interval: 5, 60, 240
      const base = "https://www.tradingview.com/chart/";
      const params = new URLSearchParams();
      params.set("symbol", symbol);      // supports CME_MINI:MNQ1!
      params.set("interval", String(interval));
      // lightweight params that generally work:
      params.set("theme", "dark");
      params.set("hideideas", "1");
      return `${base}?${params.toString()}`;
    }

    function mountCharts(){
      const sym = CONFIG.symbol;

      const url5 = CONFIG.savedLayoutUrl5m?.trim() ? CONFIG.savedLayoutUrl5m.trim() : tvChartUrl(sym, 5);
      const url1 = CONFIG.savedLayoutUrl1h?.trim() ? CONFIG.savedLayoutUrl1h.trim() : tvChartUrl(sym, 60);
      const url4 = CONFIG.savedLayoutUrl4h?.trim() ? CONFIG.savedLayoutUrl4h.trim() : tvChartUrl(sym, 240);

      $("if_5m").src = url5;
      $("if_1h").src = url1;
      $("if_4h").src = url4;
    }

    /* =========================
      MOTIVATION IMAGE (ALL 3)
    ========================== */
    function applyMotivationImage(){
      const url = CONFIG.motivationImageUrl?.trim();
      if(!url) return;
      $("wm").style.backgroundImage = `url('${url}')`;
      $("cornerLogo").src = url;
      $("splashImg").src = url;
      $("cornerLogo").classList.add("on");
      $("wm").classList.add("on");
    }

    function showMambaSplash(line){
      $("splashLine").textContent = line || "DISCIPLINE. CLARITY. EXECUTION.";
      $("mambaSplash").classList.add("on");
      setTimeout(()=> $("mambaSplash").classList.remove("on"), 1200);
    }

    /* =========================
      OPEN TRADINGVIEW BUTTON
    ========================== */
    function openTradingViewNewTab(){
      const url = tvChartUrl(CONFIG.symbol, 5);
      window.open(url, "_blank", "noopener");
    }

    /* =========================
      MAMBA / PURPLE BUTTONS
    ========================== */
    function toggleMambaLock(){
      manualLockedTheme = !manualLockedTheme;
      if(manualLockedTheme){
        setTheme("theme-mamba");
        $("mambaToggle").textContent = "MAMBA: LOCKED";
        $("sessionTag").textContent = "LOCKED";
        $("ruleState").textContent = "LOCKED";
        $("modeLabel").textContent = "MANUAL MAMBA";
        $("statusBig").textContent = "BLACK MAMBA";
        $("statusSmall").textContent = "MANUAL OVERRIDE: lock in • follow rules • no noise";
        showMambaSplash("LOCK IN. NO NOISE.");
      } else {
        $("mambaToggle").textContent = "MAMBA";
        applyAutoTheme();
      }
    }

    function togglePurpleTheme(){
      manualLockedTheme = true;
      setTheme("theme-purple");
      $("modeLabel").textContent = "PURPLE MODE";
      $("sessionTag").textContent = "FOCUS";
      $("ruleState").textContent = "FOCUS";
      $("statusBig").textContent = "FOCUS";
      $("statusSmall").textContent = "PURPLE: calm focus • sharp execution • no distraction";
      showMambaSplash("CALM MIND. SHARP EDGE.");
      $("mambaToggle").textContent = "MAMBA";
    }

    /* =========================
      SETTINGS (simple inline)
    ========================== */
    let settingsOpen = false;
    function toggleSettings(){
      settingsOpen = !settingsOpen;
      if(!settingsOpen){
        alert("Settings panel v2 coming next. For now, edit CONFIG at top of this file (symbol, spotify, image, saved layouts).");
      } else {
        alert("Edit CONFIG at top of file:\n- symbol\n- motivationImageUrl\n- spotifyEmbedUrl\n- savedLayoutUrl5m/1h/4h\n\nThen push to GitHub Pages.");
      }
      settingsOpen = false;
    }

    /* =========================
      ENTER OVERLAY (ARM)
    ========================== */
    async function armWarRoom(){
      $("enterOverlay").style.display = "none";

      // fullscreen
      if(CONFIG.autoEnterFullscreenOnArm) await enterFullscreen();

      // optionally open TV in a tab (user gesture makes it more likely to work)
      if(CONFIG.autoOpenTradingViewTabOnArm) openTradingViewNewTab();

      // quick splash
      showMambaSplash("DISCIPLINE OVER EMOTION.");
    }

    /* =========================
      INIT
    ========================== */
    $("symLabel").textContent = CONFIG.symbol;
    $("brokerTag").textContent = `INSTRUMENT: ${CONFIG.symbol}`;

    applyMotivationImage();
    mountCharts();

    // Buttons
    $("mambaToggle").addEventListener("click", toggleMambaLock);
    $("purpleToggle").addEventListener("click", togglePurpleTheme);
    $("musicToggle").addEventListener("click", ()=>setMusic(!musicOn));
    $("quotesToggle").addEventListener("click", ()=>{
      quoteOn = !quoteOn;
      $("quotesToggle").textContent = `QUOTES: ${quoteOn ? "ON" : "OFF"}`;
      $("quoteLine").style.display = quoteOn ? "block" : "none";
    });
    $("fullscreenBtn").addEventListener("click", async ()=>{
      if(isFullscreen()) await exitFullscreen();
      else await enterFullscreen();
    });
    $("settingsBtn").addEventListener("click", toggleSettings);
    $("openTvBtn").addEventListener("click", openTradingViewNewTab);

    // Enter overlay
    $("enterBtn").addEventListener("click", armWarRoom);
    $("skipBtn").addEventListener("click", ()=>{ $("enterOverlay").style.display="none"; });

    // Tick
    function tick(){
      updateClockAndCountdown();
      applyAutoTheme();
    }
    tick();
    setInterval(tick, 1000);
    setInterval(rotateQuote, CONFIG.quoteRotateMs);

    // If Spotify URL was set
    if(CONFIG.spotifyEmbedUrl && CONFIG.spotifyEmbedUrl !== "PLAYLIST_URL"){
      $("spotifyFrame").src = CONFIG.spotifyEmbedUrl;
    }
  </script>

  <!--
    =========================
    SETUP (DO THIS ONCE)
    =========================

    ✅ 1) FIX THE SYMBOL POPUPS
       We switched to TradingView chart pages in iframes (not widgets).
       Log into TradingView in the SAME browser on your TV/PC.

    ✅ 2) MOTIVATION IMAGE (ALL 3)
       Put your image in your repo:
         /assets/mamba.png
       Then keep:
         motivationImageUrl: "assets/mamba.png"

       - Watermark: ON (giant faint background)
       - Corner logo: ON (bottom-left)
       - Splash: ON (center burst when Mamba locks / Purple)

    ✅ 3) AUTO FULLSCREEN
       Browsers REQUIRE a click to enter fullscreen.
       That’s why the "ENTER BLACK MAMBA WAR ROOM" overlay exists.
       Tap ARM once on your TV remote = fullscreen.

    ✅ 4) YOUR EXACT INDICATORS / LAYOUTS
       If you want your saved TradingView layout (perfect):
       - open chart
       - Share -> Copy link
       - paste into:
           savedLayoutUrl5m / 1h / 4h

    ✅ 5) SPOTIFY
       Replace spotifyEmbedUrl with your embed link:
         https://open.spotify.com/embed/playlist/...

  -->
</body>
</html>
