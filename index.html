<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MISSION CONTROL X — STARK / MAMBA</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#03050a;
      --glass: rgba(10,14,20,.52);
      --glass2: rgba(6,10,16,.36);
      --line: rgba(255,255,255,.08);
      --line2: rgba(255,255,255,.05);
      --text:#eaf2ff;
      --muted:#9bb0c8;

      --accent:#00e6ff;
      --accent2:#00a6ff;
      --glow: rgba(0,230,255,.55);

      --red:#ff2b2b;
      --red2:#ff0000;
      --redglow: rgba(255,43,43,.65);

      --purple:#8a35ff;
      --purple2:#4f1bff;
      --purpleGlow: rgba(138,53,255,.55);

      --r:16px;
      --stroke: 1px;

      --shadow: 0 0 18px rgba(0,230,255,.10), 0 0 40px rgba(0,230,255,.06);
      --shadowHard: 0 0 26px rgba(0,230,255,.18), 0 0 70px rgba(0,230,255,.08);
      --shadowRed: 0 0 30px rgba(255,43,43,.22), 0 0 90px rgba(255,43,43,.10);
    }

    *{box-sizing:border-box}
    html,body{height:100%; width:100%}
    body{
      margin:0;
      background:
        radial-gradient(1400px 900px at 50% 30%, rgba(0,230,255,.09), transparent 58%),
        radial-gradient(900px 650px at 20% 85%, rgba(0,230,255,.06), transparent 62%),
        radial-gradient(900px 650px at 85% 80%, rgba(0,230,255,.05), transparent 62%),
        var(--bg);
      color:var(--text);
      font-family:"Orbitron", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow:hidden;
      user-select:none;
    }

    /* ===== Themes ===== */
    body.mode-stark{
      --accent:#00e6ff; --accent2:#00a6ff; --glow: rgba(0,230,255,.55);
      --shadow: 0 0 18px rgba(0,230,255,.10), 0 0 40px rgba(0,230,255,.06);
      --shadowHard: 0 0 26px rgba(0,230,255,.18), 0 0 70px rgba(0,230,255,.08);
      background:
        radial-gradient(1400px 900px at 50% 30%, rgba(0,230,255,.09), transparent 58%),
        radial-gradient(900px 650px at 20% 85%, rgba(0,230,255,.06), transparent 62%),
        radial-gradient(900px 650px at 85% 80%, rgba(0,230,255,.05), transparent 62%),
        var(--bg);
    }
    body.mode-purple{
      --accent: var(--purple); --accent2: var(--purple2); --glow: var(--purpleGlow);
      --shadow: 0 0 18px rgba(138,53,255,.10), 0 0 40px rgba(138,53,255,.06);
      --shadowHard: 0 0 26px rgba(138,53,255,.18), 0 0 70px rgba(138,53,255,.08);
      background:
        radial-gradient(1400px 900px at 50% 30%, rgba(138,53,255,.10), transparent 58%),
        radial-gradient(900px 650px at 20% 85%, rgba(138,53,255,.06), transparent 62%),
        radial-gradient(900px 650px at 85% 80%, rgba(138,53,255,.05), transparent 62%),
        #03020a;
    }
    body.mode-mamba{
      --accent: var(--red); --accent2: var(--red2); --glow: var(--redglow);
      --shadow: var(--shadowRed);
      --shadowHard: 0 0 34px rgba(255,43,43,.25), 0 0 110px rgba(255,43,43,.10);
      background:
        radial-gradient(1400px 900px at 50% 30%, rgba(255,43,43,.14), transparent 58%),
        radial-gradient(900px 650px at 20% 85%, rgba(255,43,43,.09), transparent 62%),
        radial-gradient(900px 650px at 85% 80%, rgba(255,43,43,.06), transparent 62%),
        #000;
    }

    /* ===== Ambient HUD layers ===== */
    .ambient{ position:fixed; inset:0; pointer-events:none; z-index:0; }

    .grid{
      position:absolute; inset:-2px;
      background:
        linear-gradient(to right, rgba(255,255,255,.04) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.035) 1px, transparent 1px);
      background-size: 64px 64px;
      opacity:.12;
      transform: perspective(1000px) rotateX(18deg) translateY(-72px) scale(1.18);
      transform-origin: 50% 0%;
      animation: gridDrift 16s linear infinite;
      filter: drop-shadow(0 0 10px rgba(0,0,0,.6));
    }
    @keyframes gridDrift{
      0%{ background-position: 0 0, 0 0; }
      100%{ background-position: 320px 0, 0 320px; }
    }

    .scanlines{
      position:absolute; inset:0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,0) 0px,
        rgba(0,0,0,0) 3px,
        rgba(0,0,0,.22) 4px
      );
      opacity:.12;
      mix-blend-mode: overlay;
      animation: scanMove 6s linear infinite;
    }
    @keyframes scanMove{ from{ transform:translateY(0)} to{ transform:translateY(30px)} }

    .noise{
      position:absolute; inset:0;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='240' height='240' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
      opacity:.08;
      mix-blend-mode: overlay;
      animation: noiseF 1.6s steps(2) infinite;
    }
    @keyframes noiseF{
      0%{ transform: translate(0,0); }
      20%{ transform: translate(-8px,6px); }
      40%{ transform: translate(10px,-6px); }
      60%{ transform: translate(-6px,-10px); }
      80%{ transform: translate(8px,10px); }
      100%{ transform: translate(0,0); }
    }

    /* Light sweep (Stark lab) */
    .sweep{
      position:absolute; inset:-40% -20%;
      background: linear-gradient(115deg, transparent 30%, rgba(255,255,255,.07) 45%, transparent 60%);
      opacity:.0;
      transform: translateX(-40%) translateY(-10%) rotate(8deg);
      animation: sweepPass 9.5s ease-in-out infinite;
      mix-blend-mode: screen;
    }
    @keyframes sweepPass{
      0%,55%{ opacity:0; transform: translateX(-45%) translateY(-10%) rotate(8deg); }
      65%{ opacity:.7; }
      80%{ opacity:0; transform: translateX(55%) translateY(10%) rotate(8deg); }
      100%{ opacity:0; transform: translateX(55%) translateY(10%) rotate(8deg); }
    }

    /* Ultrawide vignette */
    .vignette{
      position:absolute; inset:0;
      background: radial-gradient(120% 90% at 50% 50%, transparent 55%, rgba(0,0,0,.42) 95%);
      opacity:.9;
    }

    /* ===== Main shell (WALL MODE) ===== */
    .shell{
      position:relative;
      z-index:1;
      width:100vw;
      height:100vh;
    }

    /* STARK HUD GRID: fills entire screen */
    .hud{
      width:100%;
      height:100%;
      display:grid;
      grid-template-columns: 22% 56% 22%;
      grid-template-rows: 16% 64% 20%;
      gap: 8px;                /* tighter = bigger panels */
      padding: 8px;            /* small edge safety */
    }

    /* Panel base (thin Stark lines) */
    .panel{
      position:relative;
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(12,16,22,.55), rgba(7,9,12,.28));
      border: var(--stroke) solid rgba(255,255,255,.07);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }

    /* corner notches */
    .panel .notches{
      position:absolute; inset:0; pointer-events:none;
      opacity:.85;
    }
    .panel .notches::before,
    .panel .notches::after{
      content:"";
      position:absolute;
      width: 22px; height: 22px;
      border: 1px solid rgba(255,255,255,.10);
    }
    .panel .notches::before{ left:10px; top:10px; border-right:none; border-bottom:none; }
    .panel .notches::after{ right:10px; bottom:10px; border-left:none; border-top:none; }

    .panel::before{
      content:"";
      position:absolute; inset:-2px;
      border-radius: inherit;
      border: 1px solid rgba(255,255,255,.05);
      pointer-events:none;
    }
    .panel::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(700px 160px at 15% 12%, rgba(255,255,255,.05), transparent 65%),
        radial-gradient(900px 220px at 85% 18%, rgba(255,255,255,.04), transparent 70%);
      pointer-events:none;
      opacity:.75;
    }

    .titleRow{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      background: linear-gradient(180deg, rgba(0,0,0,.34), rgba(0,0,0,.05));
    }
    .tag{
      font-size: 10px;
      letter-spacing: 2.2px;
      text-transform: uppercase;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.82);
      background: rgba(0,0,0,.16);
      white-space:nowrap;
    }
    .tag.accent{
      color: var(--accent);
      border-color: rgba(255,255,255,.14);
      box-shadow: 0 0 16px rgba(255,255,255,.06), 0 0 22px var(--glow);
    }
    .small{ font-size: 11px; letter-spacing:2px; text-transform:uppercase; color: rgba(255,255,255,.72); }
    .big{ font-size: 18px; letter-spacing:2px; font-weight:800; }
    .muted{ color: var(--muted); }

    /* Buttons */
    .btnRow{ display:flex; gap:10px; flex-wrap:wrap; padding: 10px 12px 12px; }
    .btn{
      cursor:pointer;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.86);
      font-family: inherit;
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.22);
      box-shadow: 0 0 18px rgba(255,255,255,.04), 0 0 22px var(--glow);
    }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btn.red:hover{ box-shadow: 0 0 26px rgba(255,43,43,.10), 0 0 34px var(--redglow); }

    /* Clock area bigger */
    .clockBox{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: 8px 10px;
    }
    .time{
      font-size: clamp(36px, 5.2vh, 64px);
      font-weight:800;
      letter-spacing: 3px;
      text-shadow: 0 0 28px rgba(255,255,255,.08);
      line-height: 1.05;
    }
    .date{
      margin-top: 8px;
      font-size: 12px;
      letter-spacing: 2.2px;
      color: rgba(255,255,255,.70);
      text-transform: uppercase;
    }
    .quote{
      margin-top: 10px;
      font-size: 12px;
      letter-spacing: 2.2px;
      color: var(--accent);
      text-transform: uppercase;
      text-shadow: 0 0 20px rgba(255,255,255,.08);
    }

    /* Countdown bigger */
    .countWrap{ padding: 10px 12px 12px; }
    .countDigits{
      font-size: clamp(28px, 4.2vh, 52px);
      font-weight:800;
      letter-spacing: 3px;
      color: var(--accent);
      text-shadow: 0 0 26px var(--glow);
      text-align:right;
      line-height: 1.05;
    }
    .countSmall{
      margin-top: 8px;
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: rgba(255,255,255,.66);
      display:flex;
      justify-content:space-between;
      gap:10px;
    }

    .pulse{ animation: pulse 1s infinite; }
    @keyframes pulse{ 0%{opacity:1} 50%{opacity:.55} 100%{opacity:1} }

    /* ===== EXECUTION CORE (CIRCULAR MASK) ===== */
    .execWrap{
      position:relative;
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }

    /* The circular viewport */
    .circleViewport{
      position:relative;
      width: min(78vh, 78vw);
      height: min(78vh, 78vw);
      max-width: 96%;
      max-height: 96%;
      border-radius: 50%;
      overflow:hidden;
      box-shadow: 0 0 28px rgba(255,255,255,.08), 0 0 48px var(--glow);
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
    }

    /* TradingView inside circle */
    .circleViewport iframe{
      width: 140%;
      height: 140%;
      border:0;
      position:absolute;
      left:-20%;
      top:-20%;
      transform: scale(1.02);
      filter: contrast(1.02) saturate(1.05);
    }

    /* HUD rings around circle */
    .hudRings{
      position:absolute;
      width: min(84vh, 84vw);
      height: min(84vh, 84vw);
      max-width: 100%;
      max-height: 100%;
      border-radius:50%;
      pointer-events:none;
      filter: drop-shadow(0 0 24px rgba(255,255,255,.08)) drop-shadow(0 0 38px var(--glow));
      opacity:.92;
    }
    .ring{ position:absolute; inset:0; border-radius:50%; border: 1px solid rgba(255,255,255,.10); }
    .ring.r1{ animation: spin 28s linear infinite; }
    .ring.r2{ inset: 6%; border-color: rgba(255,255,255,.09); animation: spinR 20s linear infinite; }
    .ring.r3{ inset: 14%; border-color: rgba(255,255,255,.07); animation: spin 14s linear infinite; }
    .ring.r4{ inset: 22%; border-color: rgba(255,255,255,.06); animation: spinR 10s linear infinite; }

    /* tick ring */
    .ticks{
      position:absolute;
      inset:-1%;
      border-radius: 50%;
      background:
        conic-gradient(from 0deg,
          rgba(255,255,255,0) 0deg,
          rgba(255,255,255,.18) 2deg,
          rgba(255,255,255,0) 5deg,
          rgba(255,255,255,0) 10deg);
      -webkit-mask: radial-gradient(circle, transparent 62%, #000 63%);
      mask: radial-gradient(circle, transparent 62%, #000 63%);
      opacity:.55;
      animation: spin 24s linear infinite;
    }

    /* inner glow */
    .ringGlow{
      position:absolute; inset: 10%;
      border-radius:50%;
      background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.07), transparent 62%);
      animation: breathe 4.4s ease-in-out infinite;
      mix-blend-mode: screen;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }
    @keyframes spinR{ to{ transform: rotate(-360deg); } }
    @keyframes breathe{ 0%,100%{ opacity:.55 } 50%{ opacity:1 } }

    /* scan sweep beam */
    .beam{
      position:absolute; inset:-8%;
      border-radius:50%;
      background: conic-gradient(from 0deg, rgba(255,255,255,0) 0deg, rgba(255,255,255,.12) 22deg, rgba(255,255,255,0) 45deg);
      -webkit-mask: radial-gradient(circle, transparent 40%, #000 41%);
      mask: radial-gradient(circle, transparent 40%, #000 41%);
      opacity:.55;
      animation: beamSweep 6.8s linear infinite;
      mix-blend-mode: screen;
    }
    @keyframes beamSweep{
      0%{ transform: rotate(0deg); opacity:.0; }
      8%{ opacity:.65; }
      40%{ opacity:.18; }
      100%{ transform: rotate(360deg); opacity:0; }
    }

    /* ===== Bottom row dock ===== */
    .bottomDock{
      grid-column: 1 / 4;
      display:grid;
      grid-template-columns: 1.1fr 1.35fr 1.25fr 1.1fr;
      gap: 8px;
    }
    ul.clean{
      margin: 8px 0 0;
      padding: 0 0 0 16px;
      font-size: 12px;
      letter-spacing: 1.2px;
      color: rgba(255,255,255,.82);
      line-height: 1.5;
    }
    ul.clean li{ margin: 6px 0; }

    .statGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 8px;
    }
    .stat{
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.07);
      background: rgba(0,0,0,.18);
      padding: 10px;
    }
    .k{ font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: rgba(255,255,255,.60); }
    .v{ margin-top: 8px; font-size: 14px; letter-spacing: 1.4px; color: rgba(255,255,255,.88); }
    .v b{ color: var(--accent); }

    /* ===== Motivation (3 modes) ===== */
    .motivationWatermark{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity .25s ease;
      mix-blend-mode: screen;
      filter: grayscale(.1) contrast(1.05) saturate(1.15);
      background-size: cover;
      background-position: center;
    }
    .motivationWatermark.on{ opacity:.12; }

    .motivationBadge{
      position:absolute;
      right: 12px;
      bottom: 12px;
      width: 120px;
      height: 120px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background-size: cover;
      background-position:center;
      filter: contrast(1.08) saturate(1.2);
      box-shadow: 0 0 26px rgba(255,255,255,.08), 0 0 38px var(--glow);
      opacity:0;
      transition: opacity .25s ease;
      pointer-events:none;
      z-index:5;
    }
    .motivationBadge.on{ opacity: .88; }

    .motivationOverlay{
      position:fixed;
      inset:0;
      background-size: cover;
      background-position:center;
      opacity: 0;
      pointer-events:none;
      transition: opacity .35s ease;
      z-index: 80;
      filter: contrast(1.1) saturate(1.2);
    }
    .motivationOverlay.on{ opacity: .30; }

    /* ===== Boot overlay ===== */
    .boot{
      position:fixed; inset:0;
      z-index:100;
      background:
        radial-gradient(1200px 900px at 50% 35%, rgba(0,230,255,.10), transparent 58%),
        linear-gradient(180deg, rgba(0,0,0,.90), rgba(0,0,0,.97));
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }
    .bootCard{
      width: min(1050px, 96vw);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(10,12,16,.68);
      box-shadow: 0 0 30px rgba(255,255,255,.06), 0 0 60px rgba(0,230,255,.08);
      overflow:hidden;
    }
    .bootTop{
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .bootTitle{
      font-weight:800;
      letter-spacing: 3px;
      text-transform: uppercase;
    }
    .bootSub{
      font-size: 11px;
      letter-spacing: 2px;
      color: rgba(255,255,255,.70);
      text-transform: uppercase;
    }
    .bootBody{
      padding: 16px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
      align-items: start;
    }
    .terminal{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.38);
      padding: 12px 12px 14px;
      height: 280px;
      overflow:hidden;
      position:relative;
    }
    .termLine{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 12px;
      letter-spacing: .2px;
      color: rgba(240,250,255,.84);
      line-height: 1.45;
      white-space: pre;
    }
    .caret{
      display:inline-block;
      width: 10px;
      height: 14px;
      background: var(--accent);
      margin-left: 6px;
      animation: blink .9s step-start infinite;
      box-shadow: 0 0 18px var(--glow);
    }
    @keyframes blink{ 50%{ opacity:0 } }

    .bootActions{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.25);
      padding: 12px;
    }
    .bootActions .btn{ width:100%; margin-top: 10px; }
    .bootActions .btn.red{
      border-color: rgba(255,43,43,.25);
    }

    /* ===== Red flash transition ===== */
    .flash{
      position:fixed; inset:0;
      z-index:90;
      pointer-events:none;
      opacity:0;
      background:
        radial-gradient(900px 520px at 50% 40%, rgba(255,43,43,.52), transparent 60%),
        linear-gradient(180deg, rgba(255,0,0,.32), rgba(0,0,0,.0));
      mix-blend-mode: screen;
    }
    .flash.go{ animation: flashBang .55s ease-out forwards; }
    @keyframes flashBang{
      0%{ opacity: 0 }
      10%{ opacity: 1 }
      35%{ opacity: .70 }
      100%{ opacity: 0 }
    }

    /* ===== Reveal animation after boot (staged) ===== */
    .reveal{
      opacity:0;
      transform: translateY(8px);
      animation: revealIn .55s ease forwards;
    }
    .reveal.d1{ animation-delay: .05s; }
    .reveal.d2{ animation-delay: .18s; }
    .reveal.d3{ animation-delay: .28s; }
    .reveal.d4{ animation-delay: .38s; }
    @keyframes revealIn{
      to{ opacity:1; transform: translateY(0); }
    }

    /* Responsive fallback */
    @media (max-width: 1200px){
      body{ overflow:auto; }
      .hud{ grid-template-columns: 1fr; grid-template-rows: auto; }
      .bottomDock{ grid-template-columns: 1fr; }
      .circleViewport{ width: 92vw; height: 92vw; }
      .hudRings{ width: 96vw; height: 96vw; }
    }
  </style>
</head>

<body class="mode-stark">
  <!-- Motivation overlay mode 3 -->
  <div class="motivationOverlay" id="motivationOverlay"></div>

  <!-- Red flash -->
  <div class="flash" id="flash"></div>

  <!-- Ambient -->
  <div class="ambient">
    <div class="grid"></div>
    <div class="scanlines"></div>
    <div class="noise"></div>
    <div class="sweep"></div>
    <div class="vignette"></div>
  </div>

  <!-- BOOT -->
  <div class="boot" id="boot">
    <div class="bootCard">
      <div class="bootTop">
        <div>
          <div class="bootTitle">MISSION CONTROL X</div>
          <div class="bootSub">STARK LABS INTERFACE • MAMBA MENTALITY • WALL MODE</div>
        </div>
        <div class="tag accent" id="bootStatus">BOOTING</div>
      </div>

      <div class="bootBody">
        <div class="terminal">
          <div class="termLine" id="term"></div>
          <div class="termLine"><span style="color:var(--accent)">SYS&gt;</span> <span id="termCmd">initializing</span><span class="caret"></span></div>
        </div>

        <div class="bootActions">
          <div class="small">SYSTEM OPTIONS</div>
          <button class="btn" id="bootTheme">THEME: STARK</button>
          <button class="btn" id="bootMotivation">MOTIVATION: OFF</button>
          <button class="btn red" id="bootArm">ARM + FULLSCREEN</button>
          <button class="btn" id="bootSkip">SKIP BOOT</button>
          <div style="margin-top:10px" class="bootSub">
            Fullscreen requires a click. After arming, it stays locked-in.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN -->
  <div class="shell">
    <div class="hud">

      <!-- TOP LEFT -->
      <div class="panel reveal d1" id="leftTop">
        <div class="notches"></div>
        <div class="titleRow">
          <span class="tag accent">NEON ELITE</span>
          <span class="tag">WAR ROOM</span>
          <span class="tag" id="modeTag">STARK</span>
        </div>
        <div style="padding:10px 12px 0;">
          <div class="big">MISSION CONTROL</div>
          <div class="small muted" style="margin-top:6px;">SYMBOL • <span id="symLabel"></span></div>
        </div>
        <div class="btnRow">
          <button class="btn red" id="mambaBtn">MAMBA</button>
          <button class="btn" id="themeBtn">PURPLE</button>
          <button class="btn" id="quotesBtn">QUOTES: ON</button>
          <button class="btn" id="motBtn">MOTIVATION: OFF</button>
          <button class="btn" id="fullBtn">FULLSCREEN</button>
        </div>
      </div>

      <!-- TOP CENTER -->
      <div class="panel reveal d2" id="centerTop">
        <div class="notches"></div>
        <div class="clockBox">
          <div class="time" id="nowTime">--:--:--</div>
          <div class="date" id="nowDate">---</div>
          <div class="quote" id="quoteLine">THE JOB'S NOT FINISHED.</div>
        </div>
      </div>

      <!-- TOP RIGHT -->
      <div class="panel reveal d2" id="rightTop">
        <div class="notches"></div>
        <div class="titleRow">
          <span class="tag">COUNTDOWN</span>
          <span class="tag accent" id="sessionTag">STANDBY</span>
        </div>
        <div class="countWrap">
          <div class="countDigits" id="countdownDigits">00:00:00</div>
          <div class="countSmall">
            <span id="countLabelSmall">OPENS IN</span>
            <span class="muted" id="gateLine">RED @ 07:15 • LIVE 07:30–10:30 MT</span>
          </div>
        </div>
      </div>

      <!-- MID LEFT -->
      <div class="panel reveal d3" id="leftMid">
        <div class="notches"></div>
        <div class="titleRow">
          <span class="tag">THREAT AS NEAR</span>
          <span class="tag accent">LOCK-IN</span>
        </div>
        <div style="padding: 10px 12px 12px;">
          <ul class="clean">
            <li>A+ setups only</li>
            <li>No overtrade / no revenge</li>
            <li>Hydrate • breathe • calm focus</li>
            <li>One clean trade &gt; ten average</li>
            <li>Hit target = DONE</li>
          </ul>
        </div>
      </div>

      <!-- MID CENTER (EXECUTION CIRCULAR) -->
      <div class="panel reveal d4" id="centerMid">
        <div class="notches"></div>
        <div class="titleRow">
          <span class="tag">EXECUTION</span>
          <span class="tag accent">MNQ • 5m</span>
          <span class="tag" style="margin-left:auto" id="execState">FOCUS</span>
        </div>

        <!-- Motivation watermark -->
        <div class="motivationWatermark" id="motivationWatermark"></div>

        <div class="execWrap">
          <!-- HUD rings -->
          <div class="hudRings" aria-hidden="true">
            <div class="ticks"></div>
            <div class="ring r1"></div>
            <div class="ring r2"></div>
            <div class="ring r3"></div>
            <div class="ring r4"></div>
            <div class="ringGlow"></div>
            <div class="beam"></div>
          </div>

          <!-- Circle viewport with chart -->
          <div class="circleViewport">
            <iframe id="execChart" loading="lazy" title="MNQ 5m"></iframe>
          </div>

          <!-- Motivation badge -->
          <div class="motivationBadge" id="motivationBadge"></div>
        </div>
      </div>

      <!-- MID RIGHT (1H + 4H) -->
      <div class="panel reveal d3" id="rightMid">
        <div class="notches"></div>

        <div class="titleRow">
          <span class="tag">STRUCTURE</span>
          <span class="tag accent">MNQ • 1H</span>
          <span class="tag" style="margin-left:auto">ALIGN</span>
        </div>
        <div style="height: calc(50% - 24px); padding: 10px;">
          <iframe id="chart1h" style="width:100%; height:100%; border:0; border-radius:14px; background:rgba(0,0,0,.32);" loading="lazy" title="MNQ 1H"></iframe>
        </div>

        <div class="titleRow" style="border-top:1px solid rgba(255,255,255,.06);">
          <span class="tag">CONTEXT</span>
          <span class="tag accent">MNQ • 4H</span>
          <span class="tag" style="margin-left:auto">BIAS</span>
        </div>
        <div style="height: calc(50% - 24px); padding: 10px;">
          <iframe id="chart4h" style="width:100%; height:100%; border:0; border-radius:14px; background:rgba(0,0,0,.32);" loading="lazy" title="MNQ 4H"></iframe>
        </div>
      </div>

      <!-- BOTTOM DOCK -->
      <div class="bottomDock reveal d4">
        <div class="panel">
          <div class="notches"></div>
          <div class="titleRow">
            <span class="tag">RULES</span>
            <span class="tag accent" id="ruleState">STANDBY</span>
          </div>
          <div style="padding: 10px 12px 12px;">
            <ul class="clean" id="rulesList">
              <li>Wait confirmations (VWAP bias + 9/21 aligned)</li>
              <li>Pullback + reclaim entries only</li>
              <li>No chase candles</li>
              <li>Session gate only</li>
              <li>Target hits = shut it down</li>
            </ul>
          </div>
        </div>

        <div class="panel">
          <div class="notches"></div>
          <div class="titleRow">
            <span class="tag">RISK</span>
            <span class="tag accent">CONTROL</span>
          </div>
          <div style="padding: 10px 12px 12px;">
            <div class="statGrid">
              <div class="stat">
                <div class="k">Daily max loss</div>
                <div class="v">$ <b id="dailyMaxLoss">TBD</b></div>
              </div>
              <div class="stat">
                <div class="k">Daily target</div>
                <div class="v">$ <b id="dailyTarget">TBD</b></div>
              </div>
              <div class="stat">
                <div class="k">Weekly target</div>
                <div class="v">$ <b id="weeklyTarget">TBD</b></div>
              </div>
              <div class="stat">
                <div class="k">Position limits</div>
                <div class="v"><b id="posLimits">TBD</b></div>
              </div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="notches"></div>
          <div class="titleRow">
            <span class="tag">SYSTEM</span>
            <span class="tag accent" id="sysBadge">ONLINE</span>
          </div>
          <div style="padding: 10px 12px 12px;">
            <div class="small muted">MODEL</div>
            <div style="margin-top:6px; font-size:14px; letter-spacing:1.6px;">
              SNIPER v3 • VWAP + 9/21
            </div>
            <div style="margin-top:10px;" class="small muted">GATE</div>
            <div style="margin-top:6px; font-size:12px; letter-spacing:1.6px;">
              07:30–10:30 MT • Pre-open red @ 07:15
            </div>
            <div style="margin-top:10px;" class="small muted">STATUS</div>
            <div style="margin-top:6px; font-size:12px; letter-spacing:1.6px;" id="statusLine">
              Standby: structure • prep • calm
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="notches"></div>
          <div class="titleRow">
            <span class="tag">MOTIVATION</span>
            <span class="tag accent" id="motState">OFF</span>
          </div>
          <div style="padding: 10px 12px 12px;">
            <div class="small muted">3 MODES</div>
            <ul class="clean" style="margin-top:8px;">
              <li>Watermark behind execution</li>
              <li>Corner badge icon</li>
              <li>Overlay during boot / mamba</li>
            </ul>
            <div class="small muted" style="margin-top:10px;">ADD IMAGE</div>
            <div style="margin-top:6px; font-size:11px; letter-spacing:1.2px; color:rgba(255,255,255,.72);">
              Upload to: <b>assets/motivation.jpg</b>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

  <script>
    /* =========================
      CONFIG (edit if needed)
    ========================== */
    const CONFIG = {
      timezone: "America/Denver",
      openHour: 7, openMinute: 30,
      sessionEndHour: 10, sessionEndMinute: 30,
      preopenMinutes: 15,

      symbolLabel: "MNQ1!",

      // Embed-safe TradingView widgets (reliable on GitHub Pages)
      // We render these into iframes via srcdoc so you can control sizing easily.
      tvSymbol: "CME_MINI:MNQ1!",
      tvTheme: "dark",

      // Motivation image path
      motivationImageUrl: "assets/motivation.jpg",

      quotes: [
        "THE JOB'S NOT FINISHED.",
        "LOCK IN.",
        "DISCIPLINE OVER EMOTION.",
        "CONTROL THE PROCESS.",
        "A+ OR NOTHING.",
        "DON'T CHASE. LET IT COME.",
        "NOISE OFF. READ STRUCTURE.",
        "PATIENT. PRECISE. DEADLY.",
        "YOU DON'T RISE TO GOALS — YOU FALL TO SYSTEMS.",
        "CALM MIND. SHARP EDGE.",
        "EXECUTE. THEN EXIT.",
        "ONE CLEAN TRADE."
      ],
      quoteEveryMs: 8500,

      bootLines: [
        "[MCX] initializing core modules…",
        "[HUD] grid overlay online",
        "[SYS] time sync: MT",
        "[CHART] embedding execution viewport",
        "[RISK] gates armed",
        "[QUOTE] mamba feed loaded",
        "[READY] awaiting user arm"
      ]
    };

    /* =========================
      DOM
    ========================== */
    const $ = (id)=>document.getElementById(id);

    const el = {
      boot: $("boot"),
      term: $("term"),
      termCmd: $("termCmd"),
      bootStatus: $("bootStatus"),
      bootTheme: $("bootTheme"),
      bootMotivation: $("bootMotivation"),
      bootArm: $("bootArm"),
      bootSkip: $("bootSkip"),
      flash: $("flash"),

      modeTag: $("modeTag"),
      sessionTag: $("sessionTag"),
      ruleState: $("ruleState"),
      countdownDigits: $("countdownDigits"),
      countLabelSmall: $("countLabelSmall"),

      nowTime: $("nowTime"),
      nowDate: $("nowDate"),
      quoteLine: $("quoteLine"),

      symLabel: $("symLabel"),

      mambaBtn: $("mambaBtn"),
      themeBtn: $("themeBtn"),
      quotesBtn: $("quotesBtn"),
      motBtn: $("motBtn"),
      fullBtn: $("fullBtn"),

      execChart: $("execChart"),
      chart1h: $("chart1h"),
      chart4h: $("chart4h"),

      motWatermark: $("motivationWatermark"),
      motBadge: $("motivationBadge"),
      motOverlay: $("motivationOverlay"),
      motState: $("motState"),

      statusLine: $("statusLine"),
      execState: $("execState"),
      sysBadge: $("sysBadge"),

      dailyMaxLoss: $("dailyMaxLoss"),
      dailyTarget: $("dailyTarget"),
      weeklyTarget: $("weeklyTarget"),
      posLimits: $("posLimits"),
    };

    /* =========================
      State
    ========================== */
    let quoteOn = true;
    let quoteIdx = 0;
    let motivationOn = false;

    // Theme: stark | purple | mamba
    let theme = "stark";

    function two(n){ return String(n).padStart(2,"0"); }
    function formatHMS(ms){
      const s = Math.max(0, Math.floor(ms/1000));
      const hh = Math.floor(s/3600);
      const mm = Math.floor((s%3600)/60);
      const ss = s%60;
      return `${two(hh)}:${two(mm)}:${two(ss)}`;
    }

    function mtNowParts(){
      const now = new Date();
      const dtf = new Intl.DateTimeFormat("en-US", {
        timeZone: CONFIG.timezone,
        hour12: true,
        weekday: "long",
        month: "long",
        day: "2-digit",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit"
      });
      return dtf.formatToParts(now).reduce((acc,p)=>{
        if(p.type !== "literal") acc[p.type]=p.value;
        return acc;
      }, {});
    }

    function mtDateObjectForToday(h, m, s=0){
      const now = new Date();
      const parts = new Intl.DateTimeFormat("en-CA", {
        timeZone: CONFIG.timezone, year:"numeric", month:"2-digit", day:"2-digit"
      }).formatToParts(now).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
      const y = +parts.year, mo = +parts.month, d = +parts.day;

      const guessUtc = new Date(Date.UTC(y, mo-1, d, h, m, s));
      const mtDisplayed = new Intl.DateTimeFormat("en-US", {
        timeZone: CONFIG.timezone,
        hour12:false,
        year:"numeric", month:"2-digit", day:"2-digit",
        hour:"2-digit", minute:"2-digit", second:"2-digit"
      }).formatToParts(guessUtc).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});

      const deltaSeconds = (+mtDisplayed.hour - h)*3600 + (+mtDisplayed.minute - m)*60 + (+mtDisplayed.second - s);
      return new Date(guessUtc.getTime() - deltaSeconds*1000);
    }

    function computeSessionState(){
      const now = new Date();
      const open = mtDateObjectForToday(CONFIG.openHour, CONFIG.openMinute, 0);
      const preopen = new Date(open.getTime() - CONFIG.preopenMinutes*60*1000);
      const end = mtDateObjectForToday(CONFIG.sessionEndHour, CONFIG.sessionEndMinute, 0);

      if(now < preopen) return {phase:"standby", label:"STANDBY"};
      if(now >= preopen && now < open) return {phase:"armed", label:"ARMED"};
      if(now >= open && now < end) return {phase:"live", label:"LIVE"};
      return {phase:"post", label:"POST"};
    }

    function setTheme(next){
      theme = next;
      document.body.classList.remove("mode-stark","mode-purple","mode-mamba");
      document.body.classList.add(`mode-${theme}`);
      el.modeTag.textContent = theme.toUpperCase();
      el.themeBtn.textContent = (theme === "stark") ? "PURPLE" : "STARK";
      el.bootTheme.textContent = `THEME: ${theme.toUpperCase()}`;
    }

    function redFlash(){
      el.flash.classList.remove("go");
      void el.flash.offsetWidth;
      el.flash.classList.add("go");
    }

    function enterFullscreen(){
      const root = document.documentElement;
      const req = root.requestFullscreen || root.webkitRequestFullscreen || root.msRequestFullscreen;
      if(req) req.call(root);
    }

    function applyMotivation(){
      el.motWatermark.style.backgroundImage = `url('${CONFIG.motivationImageUrl}')`;
      el.motBadge.style.backgroundImage = `url('${CONFIG.motivationImageUrl}')`;
      el.motOverlay.style.backgroundImage = `url('${CONFIG.motivationImageUrl}')`;

      el.motWatermark.classList.toggle("on", motivationOn);
      el.motBadge.classList.toggle("on", motivationOn);

      el.motState.textContent = motivationOn ? "ON" : "OFF";
      el.motBtn.textContent = `MOTIVATION: ${motivationOn ? "ON" : "OFF"}`;
      el.bootMotivation.textContent = `MOTIVATION: ${motivationOn ? "ON" : "OFF"}`;
    }

    function rotateQuote(){
      if(!quoteOn) return;
      quoteIdx = (quoteIdx + 1) % CONFIG.quotes.length;
      el.quoteLine.textContent = CONFIG.quotes[quoteIdx];
    }

    function updateClockAndCountdown(){
      const parts = mtNowParts();
      el.nowTime.textContent = `${parts.hour}:${parts.minute}:${parts.second} ${parts.dayPeriod}`;
      el.nowDate.textContent = `${parts.weekday}, ${parts.month} ${parts.day}, ${parts.year}`;

      const now = new Date();
      const open = mtDateObjectForToday(CONFIG.openHour, CONFIG.openMinute, 0);
      let target = open;

      if(now >= open){
        const tomorrow = new Date(now.getTime() + 24*3600*1000);
        const tParts = new Intl.DateTimeFormat("en-CA", {
          timeZone: CONFIG.timezone, year:"numeric", month:"2-digit", day:"2-digit"
        }).formatToParts(tomorrow).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
        const y = +tParts.year, mo = +tParts.month, d = +tParts.day;

        const guess = new Date(Date.UTC(y, mo-1, d, CONFIG.openHour, CONFIG.openMinute, 0));
        const mtDisp = new Intl.DateTimeFormat("en-US", {
          timeZone: CONFIG.timezone, hour12:false, hour:"2-digit", minute:"2-digit", second:"2-digit"
        }).formatToParts(guess).reduce((a,p)=>{ if(p.type!=="literal") a[p.type]=p.value; return a; }, {});
        const deltaSec = (+mtDisp.hour - CONFIG.openHour)*3600 + (+mtDisp.minute - CONFIG.openMinute)*60 + (+mtDisp.second - 0);
        target = new Date(guess.getTime() - deltaSec*1000);
      }

      const ms = target.getTime() - now.getTime();
      el.countdownDigits.textContent = formatHMS(ms);

      const preopenMs = CONFIG.preopenMinutes*60*1000;
      if(ms > 0 && ms <= preopenMs){
        el.countdownDigits.classList.add("pulse");
      } else {
        el.countdownDigits.classList.remove("pulse");
      }
    }

    function applyAutoSessionMode(){
      const st = computeSessionState();
      el.sessionTag.textContent = st.label;
      el.ruleState.textContent = st.label;

      if(st.phase === "live"){
        el.countLabelSmall.textContent = "MARKET OPEN";
        el.statusLine.textContent = "MAMBA: execute clean • no noise • follow system";
        el.execState.textContent = "KILL MODE";
        // Auto mamba unless user is in purple
        if(theme !== "purple" && theme !== "mamba"){
          redFlash();
          setTheme("mamba");
          if(motivationOn){
            el.motOverlay.classList.add("on");
            setTimeout(()=>el.motOverlay.classList.remove("on"), 900);
          }
        }
      } else if(st.phase === "armed"){
        el.countLabelSmall.textContent = "OPENS IN";
        el.statusLine.textContent = "ARMED: breathe • hydrate • wait for A+";
        el.execState.textContent = "PREP";
      } else if(st.phase === "post"){
        el.countLabelSmall.textContent = "NEXT OPEN";
        el.statusLine.textContent = "POST: review • recover • no more hunting";
        el.execState.textContent = "REVIEW";
      } else {
        el.countLabelSmall.textContent = "OPENS IN";
        el.statusLine.textContent = "STANDBY: structure • prep • calm";
        el.execState.textContent = "FOCUS";
      }
    }

    /* =========================
      TradingView embed (safe)
      We inject embed HTML into iframes via srcdoc.
    ========================== */
    function tvEmbedSrcdoc(symbol, interval){
      // TradingView Advanced Chart widget
      // Interval examples: "5", "60", "240"
      const w = `
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  html,body{margin:0;height:100%;background:#000;}
  #w{height:100%;}
</style>
</head>
<body>
<div id="w"></div>
<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script>
  new TradingView.widget({
    autosize: true,
    symbol: "${symbol}",
    interval: "${interval}",
    timezone: "America/Denver",
    theme: "dark",
    style: "1",
    locale: "en",
    enable_publishing: false,
    withdateranges: true,
    hide_side_toolbar: true,
    hide_top_toolbar: true,
    allow_symbol_change: false,
    details: false,
    hotlist: false,
    calendar: false,
    container_id: "w"
  });
</script>
</body>
</html>`;
      return w;
    }

    function mountCharts(){
      // Execution (5m)
      el.execChart.srcdoc = tvEmbedSrcdoc(CONFIG.tvSymbol, "5");
      // 1H
      el.chart1h.srcdoc = tvEmbedSrcdoc(CONFIG.tvSymbol, "60");
      // 4H
      el.chart4h.srcdoc = tvEmbedSrcdoc(CONFIG.tvSymbol, "240");
    }

    /* =========================
      BOOT sequence
    ========================== */
    async function runBoot(){
      el.term.textContent = "";
      el.termCmd.textContent = "initializing";
      el.bootStatus.textContent = "BOOTING";

      if(motivationOn){
        el.motOverlay.style.backgroundImage = `url('${CONFIG.motivationImageUrl}')`;
        el.motOverlay.classList.add("on");
      }

      // staged terminal
      for(let i=0;i<CONFIG.bootLines.length;i++){
        await new Promise(r=>setTimeout(r, 250 + Math.random()*220));
        el.term.textContent += CONFIG.bootLines[i] + "\n";
        el.termCmd.textContent = (i < CONFIG.bootLines.length-1) ? "loading" : "ready";
      }

      el.bootStatus.textContent = "READY";

      // subtle settle
      if(motivationOn){
        setTimeout(()=>el.motOverlay.classList.remove("on"), 500);
      }
    }

    function closeBoot(){
      el.boot.style.display = "none";
    }

    /* =========================
      INIT
    ========================== */
    el.symLabel.textContent = CONFIG.symbolLabel;

    // default risk placeholders
    el.dailyMaxLoss.textContent = "TBD";
    el.dailyTarget.textContent = "TBD";
    el.weeklyTarget.textContent = "TBD";
    el.posLimits.textContent = "TBD";

    setTheme("stark");
    mountCharts();
    applyMotivation();
    runBoot();

    // Buttons
    el.fullBtn.addEventListener("click", enterFullscreen);

    el.themeBtn.addEventListener("click", ()=>{
      if(theme === "stark") setTheme("purple");
      else setTheme("stark");
    });

    el.mambaBtn.addEventListener("click", ()=>{
      redFlash();
      setTheme("mamba");
      el.sessionTag.textContent = "LIVE";
      el.ruleState.textContent = "EXECUTE";
      el.execState.textContent = "KILL MODE";
      el.statusLine.textContent = "MAMBA: execute clean • no noise • follow system";
      if(motivationOn){
        el.motOverlay.classList.add("on");
        setTimeout(()=>el.motOverlay.classList.remove("on"), 900);
      }
    });

    el.quotesBtn.addEventListener("click", ()=>{
      quoteOn = !quoteOn;
      el.quotesBtn.textContent = `QUOTES: ${quoteOn ? "ON" : "OFF"}`;
      el.quoteLine.style.display = quoteOn ? "block" : "none";
    });

    el.motBtn.addEventListener("click", ()=>{
      motivationOn = !motivationOn;
      applyMotivation();
    });

    // Boot buttons
    el.bootTheme.addEventListener("click", ()=>{
      if(theme === "stark") setTheme("purple");
      else setTheme("stark");
    });

    el.bootMotivation.addEventListener("click", ()=>{
      motivationOn = !motivationOn;
      applyMotivation();
    });

    el.bootArm.addEventListener("click", async ()=>{
      redFlash();
      enterFullscreen();
      await new Promise(r=>setTimeout(r, 250));
      closeBoot();
    });

    el.bootSkip.addEventListener("click", ()=>{
      closeBoot();
    });

    // Ticks
    function tick(){
      updateClockAndCountdown();
      applyAutoSessionMode();
    }
    tick();
    setInterval(tick, 1000);
    setInterval(rotateQuote, CONFIG.quoteEveryMs);
  </script>

</body>
</html>
